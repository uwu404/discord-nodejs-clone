{"version":3,"sources":["utils.js","icons/plus.jsx","classes/server/index.jsx","classes/user/user-settings.jsx","icons/settings.jsx","icons/bones.jsx","app/message/home.jsx","icons/crown.jsx","classes/user/index.jsx","icons/3dots.jsx","classes/message/delete-message.jsx","classes/message/invite.jsx","classes/message/index.jsx","icons/hashtag.jsx","classes/channel/index.jsx","classes/message/image-preview.jsx","icons/members.jsx","icons/down.jsx","classes/server/invite-people.jsx","classes/server/server-editor.jsx","classes/channel/create-channel.jsx","app/message/message.jsx","icons/home.jsx","app/message/index.jsx","app/signup/index.jsx","app/login/index.jsx","app/index.jsx","index.js"],"names":["Utils","Out","ref","e","click","children","wrapperRef","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","isScolled","el","holder","body","getBoundingClientRect","top","bottom","height","holderRect","Plus","props","fill","width","size","version","id","x","y","viewBox","d","components","view","onCreate","user","useState","clicked","setClicked","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","Creator","defaultName","username","value","setValue","image","setImage","animation","setAnimation","handleChange","a","files","then","data","catch","console","log","del","setTimeout","createServer","fetch","link","method","headers","Authorization","token","JSON","stringify","icon","name","res","json","server","className","onClick","alt","src","onChange","type","htmlFor","required","defaultValue","Server","this","_id","members","channels","me","invites","owner","tooltip","displayIcon","placeholder","err","servers","isHome","index","map","s","i","toJSX","reverse","Add","img","Image","UserSettings","onClickOut","onEdit","onSave","displayAvatarURL","setSrc","password","reveal","setPassword","setUsername","profileColor","setProfileColor","edited","setEdited","setTheme","useContext","ThemeContext","handleInputChange","localStorage","getItem","currentTheme","setCurrentTheme","switchTo","theme","setItem","accept","email","prev","repeat","length","update","maxLength","edit","u","Object","assign","Gear","Skeleton","style","Math","floor","random","SkeletonLoadingMessage","Array","_","Map","users","User","tag","recieved","online","Friends","friends","setFriends","isMounted","filter","f","text","setText","sendRequest","split","ok","color","autoComplete","includes","Pending","requests","setRequests","invite","DM","dm","setView","onJoin","setLogs","messages","setMessages","isLoading","setIsLoading","sendMessage","useCallback","k","code","content","textContent","preventDefault","message","author","Date","now","timestamp","unsent","failed","channel","newOrder","splice","indexOf","find","msg","list","m","useLayoutEffect","socket","on","off","pointerEvents","onKeyDown","contentEditable","navigator","userAgent","Home","button","setButton","Dm","setDm","logs","clickEvent","screen","setScreen","ScreenContext","not","notifications","setNotifications","n","some","marginLeft","opacity","toIcon","Crown","enableBackground","xmlSpace","cx","cy","r","points","MemberX","member","isClicked","setIsClicked","right","animationName","avatarURL","setUser","editHandler","appear","save","disappear","Icon","Component","setServer","Update","setOnline","setTop","divRef","viewportOffset","window","innerHeight","fakeEvent","response","onlineLength","offlineLength","offline","sortedMembers","sort","b","localeCompare","Member","jsx","push","concat","Dots","transform","MessageDelete","onCancel","delete","Invite","state","setState","Attachment","View","attachment","URL","bg","setBg","onLoad","loading","calculateImage","displayAttachmentURL","Menu","clickOut","UserContext","deleteD","match","Message","left","innerWidth","marginTop","createdAt","zIndex","tabIndex","date","today","minutes","getHours","padStart","getMinutes","getMonth","getFullYear","getDay","toLocaleDateString","paddingTop","paddingBottom","query","trunc","mapped","getView","toJSXMin","Hashtag","c","Channel","emit","Messages","LoadChannels","ImagePreview","onSend","MemberLoading","times","Down","stroke","strokeWidth","strokeLinecap","strokeLinejoin","InvitePeople","quit","ids","setIds","setFilter","toUpperCase","toLowerCase","clipboard","writeText","readOnly","EditServer","setName","handleFileChange","CreateChannel","settings","setSettings","waiting","setWaiting","create","textAlign","fontSize","Main","setChannel","setMembers","ch","fetchMembers","join","fetchMessages","forEach","updatedUser","send","allMessages","ms","sendImage","base64str","cancelHandler","getImageFromInput","getImageFromPaste","clipboardData","getData","items","getAsFile","skeleton","setSkeleton","menu","setMenu","IP","leave","createNewChannel","serverSettings","marginBottom","toTitle","onPaste","MapMembers","EmbedHomeButton","gradientUnits","x1","y1","x2","y2","offset","stopColor","createContext","io","transports","saved","setServers","connect","notification","disconnect","handlenewServer","sv","Provider","findIndex","LoadServers","iserver","Signup","shrink","setError","consfirmPassword","sessionStorage","Login","expand","toString","App","Initial","href","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.817ce07f.chunk.js","sourcesContent":["import React, { useRef, useEffect } from \"react\";\r\n\r\nfunction useOutsideAlerter(ref, e) {\r\n    useEffect(() => {\r\n\r\n        function handleClickOutside(event) {\r\n            if (ref.current && !ref.current.contains(event.target)) {\r\n                e()\r\n            }\r\n        }\r\n\r\n        document.addEventListener(\"mousedown\", handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\", handleClickOutside);\r\n        };\r\n    }, [ref, e]);\r\n}\r\n\r\nconst Utils = {\r\n    Out({ click, children }) {\r\n        const wrapperRef = useRef(null);\r\n        useOutsideAlerter(wrapperRef, click);\r\n        return <div ref={wrapperRef}>{children}</div>;\r\n    },\r\n    isScolled(el, holder) {\r\n        holder = holder || document.body\r\n        const { top, bottom, height } = el.getBoundingClientRect()\r\n        const holderRect = holder.getBoundingClientRect()\r\n\r\n        return top <= holderRect.top\r\n            ? holderRect.top - top <= height\r\n            : bottom - holderRect.bottom <= height\r\n    }\r\n}\r\n\r\nexport default Utils","const Plus = (props) => {\r\n    return (\r\n        <svg {...props} fill=\"currentColor\" width={props.size} height={props.size} version=\"1.1\" id=\"Capa_1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 60.364 60.364\">\r\n            <g>\r\n                <path d=\"M54.454,23.18l-18.609-0.002L35.844,5.91C35.845,2.646,33.198,0,29.934,0c-3.263,0-5.909,2.646-5.909,5.91v17.269\r\n\t\tL5.91,23.178C2.646,23.179,0,25.825,0,29.088c0.002,3.264,2.646,5.909,5.91,5.909h18.115v19.457c0,3.267,2.646,5.91,5.91,5.91\r\n\t\tc3.264,0,5.909-2.646,5.91-5.908V34.997h18.611c3.262,0,5.908-2.645,5.908-5.907C60.367,25.824,57.718,23.178,54.454,23.18z\"/>\r\n            </g>\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default Plus","import \"./index.css\"\r\nimport { useState } from \"react\"\r\nimport Utils from \"../../utils\"\r\nimport { link } from \"../../config.json\"\r\nimport Plus from \"../../icons/plus\"\r\n\r\nconst components = {\r\n    Add: ({ view, onCreate, user }) => {\r\n        const [clicked, setClicked] = useState(\"\")\r\n        const toBase64 = file => new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n\r\n        const Creator = () => {\r\n            const defaultName = `${user.username}'s server`\r\n            const [value, setValue] = useState(defaultName)\r\n            const [image, setImage] = useState(``)\r\n            const [animation, setAnimation] = useState(\"bigger\")\r\n\r\n            const handleChange = async (e) => {\r\n                toBase64(e.target.files[0])\r\n                    .then(data => setImage(data))\r\n                    .catch(console.log)\r\n            }\r\n\r\n            const del = () => {\r\n                setClicked(\"\")\r\n                setAnimation(\"smaller\")\r\n                setTimeout(() => view(), 100)\r\n            }\r\n\r\n            const createServer = async () => {\r\n                const server = await fetch(`${link}servers`, {\r\n                    method: \"POST\",\r\n                    headers: {\r\n                        \"Content-Type\": \"application/json\",\r\n                        Authorization: user.token,\r\n                    },\r\n                    body: JSON.stringify({\r\n                        icon: image,\r\n                        name: value\r\n                    })\r\n                }).then(res => res.json())\r\n                del()\r\n                onCreate?.(server)\r\n            }\r\n\r\n            return (\r\n                <div className={`dark-div ${animation}`}>\r\n                    <Utils.Out click={del}>\r\n                        <div className={`creator ${animation}`}>\r\n                            <div className=\"view-server\">\r\n                                <Plus onClick={del} size={25} />\r\n                                <h2>Create a new Server</h2>\r\n                                <p className=\"dummy-text\">Create a new Server, customize it! Invite your friends to it. And have a good time.</p>\r\n                                <div className=\"selector\">\r\n                                    <img className=\"my-icon\" alt=\"\" src={image} />\r\n                                    <input onChange={handleChange} className=\"select-icon\" type=\"file\" />\r\n                                </div>\r\n                            </div>\r\n                            <label htmlFor=\"server\">SERVER NAME</label>\r\n                            <input required name=\"server\" defaultValue={defaultName} onChange={(event) => setValue(event.target.value)} className=\"select-server-name\" />\r\n                            <div className=\"create-server\">\r\n                                <button onClick={del} className=\"create-server-button cancel-creating\">Back</button>\r\n                                <button onClick={createServer} className=\"create-server-button\">Create</button>\r\n                            </div>\r\n                        </div>\r\n                    </Utils.Out>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        const click = () => {\r\n            setClicked(\"add-clicked\")\r\n            view(<Creator />)\r\n        }\r\n\r\n        return (\r\n            <div onClick={click} className={`add-server-border ${clicked}`}><div className=\"add-server\"><Plus size={25}/></div></div>\r\n        )\r\n    }\r\n}\r\n\r\nclass Server {\r\n    constructor(server, user) {\r\n        this.id = server._id\r\n        this.members = server.members\r\n        this.name = server.name\r\n        this.icon = server.icon\r\n        this.channels = server.channels\r\n        this.me = user\r\n        this.invites = server.invites\r\n        this.owner = server.owner\r\n    }\r\n    static LoadServers({ servers, click, isHome, me, index }) {\r\n        const jsx = servers.map((s, i) => {\r\n            const server = new Server(s, me)\r\n            return server.toJSX(index === i && !isHome, () => {\r\n                click(server)\r\n            })\r\n        })\r\n        return jsx.reverse()\r\n    }\r\n    static Add = components.Add\r\n    displayIcon(width, height) {\r\n        return `${link + this.icon}?${width ? `width=${width}&height=${height || width}` : \"\"}`\r\n    }\r\n    toJSX(clicked, click) {\r\n        return (\r\n            <div tooltip={this.name} key={this.id} className={`server ${clicked ? \"click\" : \"\"}`}>\r\n                <img width=\"50\" height=\"50\" onClick={click} alt=\"icon\" src={this.displayIcon(50)} className=\"server-icon\" />\r\n            </div>\r\n        )\r\n    }\r\n    getSearchInput() {\r\n        return (\r\n            <div className=\"search-input\">\r\n                <input placeholder=\"search\"/>\r\n            </div>\r\n        )\r\n    }\r\n    async fetchMembers() {\r\n        const members = await fetch(`${link}servers/${this.id}/members`, {\r\n            headers: { Authorization: this.me.token }\r\n        })\r\n            .then(res => res.json())\r\n            .catch(err => console.log(err))\r\n        return members\r\n    }\r\n}\r\n\r\nexport default Server","import { useState, useEffect, useContext } from \"react\"\r\nimport Utils from \"../../utils\"\r\nimport Login from \"../../app/login\"\r\nimport { ThemeContext } from \"../../app/message\"\r\n\r\nconst toBase64 = file => new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n        const img = new Image()\r\n        img.onload = () => resolve(reader.result);\r\n        img.src = reader.result\r\n    }\r\n    reader.onerror = error => reject(error);\r\n});\r\n\r\nfunction UserSettings({ user, name, onClickOut, onEdit, onSave }) {\r\n    const [src, setSrc] = useState(user.displayAvatarURL(150))\r\n    const [password, setPassword] = useState({ password: user.password, reveal: false })\r\n    const [username, setUsername] = useState(user.username)\r\n    const [profileColor, setProfileColor] = useState(user.profileColor)\r\n    const [edited, setEdited] = useState(false)\r\n    const setTheme = useContext(ThemeContext)\r\n\r\n    useEffect(() => {\r\n        if (\r\n            (password.password === user.password && username === user.username && src === user.displayAvatarURL(150) && profileColor === user.profileColor) ||\r\n            (!password.password || !username || !src) \r\n        ) setEdited(false)\r\n        else setEdited(true)\r\n    }, [password.password, username, src, user, profileColor])\r\n\r\n    const handleInputChange = async (e) => {\r\n        const file = e.target.files[0]\r\n        const data = await toBase64(file).catch(() => 0)\r\n        if (data) setSrc(data)\r\n    }\r\n\r\n    const revealPassword = () => setPassword(prev => ({ password: prev.password, reveal: !prev.reveal }))\r\n\r\n    const Logout = () => user.update(<Login update={user.update} />)\r\n\r\n    const edit = () => {\r\n        if (!edited) return\r\n        onSave()\r\n        setEdited(false)\r\n        user.edit(username, src, profileColor).then(u => onEdit(Object.assign(user, u)))\r\n    }\r\n\r\n    const [currentTheme, setCurrentTheme] = useState(localStorage.getItem(\"theme\") || \"light\")\r\n    const switchTo = (theme) => () => {\r\n        setTheme(theme)\r\n        localStorage.setItem(\"theme\", theme)\r\n        setCurrentTheme(theme)\r\n    }\r\n\r\n    const supportedImages = \"image/gif,image/png,image/jpeg,image/webp\"\r\n\r\n    return (\r\n        <div className=\"dark-div\">\r\n            <Utils.Out click={onClickOut}>\r\n                <div className={`user-settings ${name} ${!edited && \"is-not-edited\"}`}>\r\n                    <div className=\"user-overview\">\r\n                        <div className=\"avatar-div\">\r\n                            <div className=\"user-avatar-selector\">\r\n                                <img width=\"150\" height=\"150\" src={src} alt=\"avatar\" className=\"view-avatar\" />\r\n                                <input accept={supportedImages} onChange={handleInputChange} type=\"file\" className=\"avatar-config\" />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"overview\">\r\n                            <h2 className=\"label\">USERNAME</h2>\r\n                            <h3 placeholder=\"no username\" className=\"view-username\">{username}</h3>\r\n                            <h2 className=\"label\">EMAIL</h2>\r\n                            <h3 placeholder=\"no email\" className=\"view-email\">{user.email}</h3>\r\n                            <h2 className=\"label\">PASSWORD</h2>\r\n                            <h3 placeholder=\"no password\" onClick={revealPassword} className=\"view-password\">{password.reveal ? password.password : \"*\".repeat(password.password.length)}</h3>\r\n                            <button onClick={Logout} className=\"logout\">Logout</button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"user-editor\">\r\n                        <h2 className=\"customize\">Customize your profile</h2>\r\n                        <label className=\"generic-label\" htmlFor=\"username\">USERNAME</label>\r\n                        <input name=\"username\" placeholder=\"Username\" onChange={(e) => setUsername(e.target.value)} defaultValue={user.username} maxLength=\"25\" type=\"text\" />\r\n                        <label className=\"generic-label\" htmlFor=\"profile-color\">PROFILE COLOR</label>\r\n                        <input onChange={(e) => setProfileColor(e.target.value)} defaultValue={user.profileColor || \"#000000\"} name=\"profile-color\" className=\"profile-color\" type=\"color\" />\r\n                        <h2 className=\"customize theme-h2\">Theme</h2>\r\n                        <div className=\"themes\">\r\n                            <div onClick={switchTo(\"light\")} className={`light-theme ${currentTheme}`}>LIGHT</div>\r\n                            <div onClick={switchTo(\"dark\")} className={`dark-theme ${currentTheme}`}>DARK</div>\r\n                        </div>\r\n                        <button onClick={onClickOut} className=\"cancel-profile\">Cancel</button>\r\n                        <button onClick={edit} className=\"save-profile\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </Utils.Out>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserSettings","const Gear = ({ width, height }) => {\r\n\treturn (\r\n\t\t<svg fill=\"currentColor\" width={width} height={height} x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\r\n\t\t\t<g>\r\n\t\t\t\t<g>\r\n\t\t\t\t\t<path d=\"M495.304,205.913h-45.519c-4.73-18.267-11.996-35.493-21.382-51.291l33.961-33.961c6.487-6.492,6.516-17.095,0-23.611\r\n\t\t\tL414.95,49.633c-6.521-6.521-17.093-6.521-23.613,0l-33.959,33.961c-15.797-9.385-33.024-16.649-51.291-21.382V16.696\r\n\t\t\tC306.087,7.477,298.572,0,289.391,0h-66.783c-9.18,0-16.696,7.477-16.696,16.696v45.517c-18.265,4.73-35.493,11.992-51.291,21.379\r\n\t\t\tl-33.959-33.959c-6.521-6.521-17.093-6.521-23.613,0L49.635,97.05c-6.521,6.52-6.52,17.089,0,23.611l33.961,33.961\r\n\t\t\tc-9.385,15.799-16.651,33.024-21.382,51.291H16.696C7.515,205.913,0,213.39,0,222.609v66.783c0,9.214,7.482,16.693,16.696,16.693\r\n\t\t\th45.519c4.73,18.267,11.996,35.493,21.382,51.291l-33.961,33.961c-6.521,6.52-6.52,17.089,0,23.611l47.415,47.417\r\n\t\t\tc6.527,6.527,17.084,6.525,23.613,0l33.959-33.959c15.797,9.387,33.026,16.647,51.291,21.379v45.519\r\n\t\t\tc0,9.214,7.482,16.696,16.696,16.696h66.783c9.157,0,16.696-7.463,16.696-16.696v-45.519c18.265-4.73,35.493-11.992,51.291-21.379\r\n\t\t\tl33.959,33.959c6.527,6.527,17.084,6.525,23.613,0l47.415-47.417c6.487-6.492,6.516-17.095,0-23.611l-33.961-33.961\r\n\t\t\tc9.385-15.799,16.651-33.024,21.382-51.291h45.519c9.214,0,16.696-7.481,16.696-16.693v-66.783\r\n\t\t\tC512,213.447,504.54,205.913,495.304,205.913z M256,339.476c-46.08-0.029-83.449-37.396-83.478-83.476\r\n\t\t\tc0.029-46.082,37.398-83.449,83.478-83.478c46.08,0.029,83.449,37.396,83.478,83.478C339.449,302.08,302.08,339.448,256,339.476z\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</g>\r\n\t\t\t</g>\r\n\t\t</svg>\r\n\t)\r\n}\r\n\r\nexport default Gear","const Skeleton = () => {\r\n    return (\r\n        <div className=\"skeleton\">\r\n            <div className=\"skeleton-pfp\"></div>\r\n            <div style={{ width: Math.floor(Math.random() * 50) + 100 }} className=\"skeleton-username\"></div>\r\n            <div>\r\n                <div style={{ width: \"10%\" }} className=\"skeleton-content-1 sl\"></div>\r\n                <div style={{ width: \"30%\" }} className=\"skeleton-content-2 sl\"></div>\r\n                <div style={{ width: \"15%\" }} className=\"skeleton-content-3 sl\"></div>\r\n                <div style={{ width: \"25%\" }} className=\"skeleton-content-4 sl\"></div>\r\n            </div>\r\n            {Math.random() < 0.3 &&\r\n                <div className=\"random-sl\">\r\n                    <div className=\"skeleton-content-5 sl\"></div>\r\n                    <div className=\"skeleton-content-6 sl\"></div>\r\n                </div>\r\n            }\r\n            {Math.random() < 0.1 && <div className=\"skeleton-content-a\"></div>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default function SkeletonLoadingMessage() {\r\n    return [...Array(20)].map((_, i) => <Skeleton key={i} />)\r\n}","import { useEffect, useLayoutEffect, useState, useCallback, useContext } from \"react\"\r\nimport User from \"../../classes/user\"\r\nimport Plus from \"../../icons/plus\"\r\nimport \"./home.css\"\r\nimport { link } from \"../../config.json\"\r\nimport { ScreenContext, socket } from \".\"\r\nimport Message from \"../../classes/message\"\r\nimport SkeletonLoadingMessage from \"../../icons/bones\"\r\n\r\nconst Map = ({ users, onClick, type }) => {\r\n    return users.map(u => {\r\n        if (!u) return null\r\n        const user = new User(u)\r\n        return (\r\n            <div key={user.id} className=\"friend\">\r\n                <img width=\"45\" height=\"45\" alt=\"uwu\" src={user.displayAvatarURL(45)} className=\"friend-pfp\" />\r\n                <h5 className=\"friend-name\">{user.username}<span>{user.tag}</span></h5>\r\n                <p className=\"state\">{type === \"requests\" && u.recieved && \"Incoming friend request\"}</p>\r\n                <p className=\"state\">{type === \"requests\" && !u.recieved && \"Ongoing friend request\"}</p>\r\n                <p className=\"state\">{type === \"friends\" && (!u.online ? \"Offline\" : \"Online\")}</p>\r\n                {type === \"requests\" && u.recieved && <div onClick={() => onClick?.(user)} className=\"accept\"><Plus size={15} /></div>}\r\n                {type === \"friends\" && <div onClick={() => onClick?.(user)} className=\"accept\">DM</div>}\r\n            </div>\r\n        )\r\n    })\r\n}\r\n\r\nconst Friends = ({ online, user, click }) => {\r\n    const [friends, setFriends] = useState([])\r\n\r\n    useEffect(() => {\r\n        let isMounted = true\r\n        fetch(`${link}friends`, {\r\n            headers: {\r\n                Authorization: user.token\r\n            }\r\n        }).then(res => res.json())\r\n            .then(friends => {\r\n                if (isMounted) setFriends(online ? friends.filter(f => f.online) : friends)\r\n            })\r\n        return () => {\r\n            isMounted = false\r\n            setFriends([])\r\n        }\r\n    }, [user, online])\r\n\r\n    return (\r\n        <div>\r\n            <h5 className=\"home-title\">{online ? \"ONLINE\" : \"ALL\"}—{friends.length}</h5>\r\n            <div className=\"list\">\r\n                <Map onClick={click} type=\"friends\" users={friends} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Add = ({ user }) => {\r\n    const [value, setValue] = useState(\"\")\r\n    const [text, setText] = useState(<p className=\"dumb-text-3\">You can add a friend by their tag. It's CaSe SeNsiTive!</p>)\r\n\r\n    const handleInputChange = (e) => setValue(e.target.value)\r\n\r\n    const sendRequest = async () => {\r\n        const [username, tag] = value.split(\"#\")\r\n        if (!username || !tag) return\r\n        const res = await fetch(`${link}users/${username}&${tag}/request`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                Authorization: user.token,\r\n                \"Content-Type\": \"application/json\"\r\n            }\r\n        })\r\n\r\n        if (res.ok) {\r\n            return setText(<p style={{ color: \"var(--green)\" }} className=\"dumb-text-3\">You send a friend request to {username + \"#\" + tag}</p>)\r\n        }\r\n\r\n        setText(<p style={{ color: \"var(--red)\" }} className=\"dumb-text-3\">Failed to send a friend request to {username + \"#\" + tag}</p>)\r\n    }\r\n\r\n    return (\r\n        <div className=\"invite\">\r\n            <h3 className=\"h3-add\">ADD FRIEND</h3>\r\n            {text}\r\n            <div className=\"add-friend-input\">\r\n                <input autoComplete=\"off\" maxLength=\"35\" onChange={handleInputChange} placeholder=\"Enter a username#0000\" />\r\n                <div className=\"fake-after\">{!value.includes(\"#\") && value}</div>\r\n                <button onClick={sendRequest} className={`send-friend-request ${value && \"valid\"}`}>Send friend request</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Pending = ({ user }) => {\r\n    const [requests, setRequests] = useState([])\r\n\r\n    useEffect(() => {\r\n        let isMounted = true\r\n        fetch(`${link}friends/pending`, {\r\n            headers: {\r\n                Authorization: user.token\r\n            }\r\n        }).then(res => res.json())\r\n            .then(requests => {\r\n                if (isMounted) setRequests(requests)\r\n            })\r\n        return () => { isMounted = false }\r\n    }, [user])\r\n\r\n    const click = (invite) => {\r\n        setRequests(prev => [...prev].filter(u => u._id !== invite.id))\r\n        fetch(`${link}accept/${invite.id}`, {\r\n            method: \"POST\",\r\n            headers: { Authorization: user.token }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h5 className=\"home-title\">PENDING—{requests.length}</h5>\r\n            <div className=\"list\">\r\n                <Map type=\"requests\" onClick={click} users={requests} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst DM = ({ dm, me, setView, onJoin, setLogs }) => {\r\n\r\n    const [messages, setMessages] = useState([])\r\n    const [isLoading, setIsLoading] = useState(false)\r\n\r\n    const sendMessage = useCallback((k) => {\r\n        if (k.code !== \"Enter\") return\r\n        const content = k.target.textContent\r\n        if (content.length === 0) return\r\n        k.preventDefault?.()\r\n        const message = { author: me, content: k.target.textContent, _id: `m${Date.now() + Math.random()}`, timestamp: Date.now(), unsent: true, failed: false, channel: dm.user.id }\r\n        setMessages(prev => [...prev, message])\r\n        setLogs(prev => {\r\n            const newOrder = [...prev]\r\n            newOrder.splice(0, 0, newOrder.splice(newOrder.indexOf(newOrder.find(u => u._id === dm.user._id)), 1)[0]);\r\n            return newOrder\r\n        });\r\n        k.target.textContent = \"\"\r\n        fetch(`${link}dm/${dm.user.id}`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                Authorization: me.token,\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                content: content\r\n            })\r\n        }).then(res => res.json())\r\n            .then(msg => {\r\n                setMessages(prev => {\r\n                    const list = [...prev]\r\n                    const m = list.find(m => m._id === message._id)\r\n                    m._id = msg._id\r\n                    m.invite = msg.invite\r\n                    m.unsent = false\r\n                    return list\r\n                })\r\n            })\r\n            .catch((err) => {\r\n                console.error(err)\r\n                setMessages(prev => {\r\n                    const list = [...prev]\r\n                    const m = list.find(m => m._id === message._id)\r\n                    m.failed = true\r\n                    return list\r\n                })\r\n            })\r\n    }, [me, dm, setLogs])\r\n\r\n    useLayoutEffect(() => {\r\n        let isMounted = true\r\n        setIsLoading(true)\r\n        fetch(`${link}dm/${dm.user.id}`, {\r\n            headers: { Authorization: me.token }\r\n        }).then(res => res.json())\r\n            .then(messages => {\r\n                if (isMounted) {\r\n                    setMessages(messages)\r\n                    setIsLoading(false)\r\n                    if (dm.message?.target.textContent) sendMessage(dm.message)\r\n                }\r\n            })\r\n        socket.on(\"dm\", message => {\r\n            if (!isMounted) return\r\n            if (message.channel !== dm.user.id) return\r\n            setMessages(prev => [...prev, message])\r\n        })\r\n        socket.on(\"messageDelete\", message => {\r\n            if (!isMounted) return\r\n            if (message.user !== dm.user.id && message.user !== me._id) return\r\n            setMessages(prev => [...prev].filter(m => m._id !== message._id))\r\n        })\r\n        return () => {\r\n            isMounted = false\r\n            socket.off(\"dm\").off(\"messageDelete\")\r\n            setMessages([])\r\n        }\r\n    }, [me.token, me._id, dm, sendMessage])\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"chat\">\r\n                {isLoading && <SkeletonLoadingMessage />}\r\n                <Message.Map onJoin={onJoin} setView={setView} setMessages={setMessages} messages={messages} me={me} />\r\n                <div className=\"dm-start\">\r\n                    <img height=\"85\" width=\"85\" className=\"dm-avatar\" alt=\"icon\" src={dm.user.displayAvatarURL(90)} />\r\n                    <h3 className=\"dm-username\">{dm.user.username}</h3>\r\n                    <p className=\"dumb-text-2\">This is the beginning of your direct message history with <span>{dm.user.username}</span></p>\r\n                </div>\r\n            </div>\r\n            <div className=\"controll\">\r\n                <div style={{ pointerEvents: isLoading ? \"none\" : \"all\" }} onKeyDown={sendMessage} placeholder={`Send a message to ${dm.user.username}`}\r\n                    contentEditable={navigator.userAgent.indexOf(\"Firefox\") !== -1 ? \"true\" : \"plaintext-only\"} className=\"not-input\"></div>\r\n                <div className=\"attach-file\">\r\n                    <input type=\"file\" />\r\n                    <Plus size={12} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Home = ({ user, update, dm, onJoin }) => {\r\n    const [view, setView] = useState()\r\n    const me = new User(Object.assign(user, { view: setView, update }))\r\n    const [button, setButton] = useState(\"online\")\r\n    const [Dm, setDm] = useState(dm)\r\n    const [logs, setLogs] = useState([])\r\n    const clickEvent = (u) => setDm({ user: u })\r\n    const [screen, setScreen] = useState(<Friends click={clickEvent} online={true} user={user} />)\r\n\r\n    useEffect(() => {\r\n        if (dm) setDm(dm)\r\n    }, [dm])\r\n\r\n    const { not: [notifications, setNotifications] } = useContext(ScreenContext)\r\n\r\n    useLayoutEffect(() => {\r\n        if (!Dm?.user.id) return\r\n        if (notifications.find(n => n.user._id === Dm.user.id)) setNotifications(prev => [...prev].filter(n => n.user._id !== Dm.user.id))\r\n        fetch(`${link}notifications?id=${Dm.user.id}`, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n                Authorization: user.token\r\n            }\r\n        })\r\n            .catch(console.log)\r\n    }, [notifications, setNotifications, Dm?.user.id, user.token])\r\n\r\n    useEffect(() => {\r\n        let isMounted = true\r\n        fetch(`${link}dms/logs`, {\r\n            headers: {\r\n                Authorization: user.token\r\n            }\r\n        }).then(res => res.json())\r\n            .then(logs => {\r\n                if (isMounted) setLogs(logs)\r\n            })\r\n        socket.on(\"online\", (user) => {\r\n            setLogs(prev => {\r\n                const logs = [...prev]\r\n                const u = logs.find(u => u._id === user.user)\r\n                if (!u) return logs\r\n                u.online = user.online\r\n                return logs\r\n            })\r\n        })\r\n        return () => { \r\n            isMounted = false \r\n            socket.off(\"online\")\r\n        }\r\n    }, [user])\r\n\r\n    useEffect(() => {\r\n        if (Dm) {\r\n            setScreen(<DM setLogs={setLogs} onJoin={onJoin} dm={Dm} me={user} setView={setView} />)\r\n            setButton(Dm.user.id)\r\n            if (!logs.some(u => u._id === Dm.user.id)) {\r\n                setLogs(prev => [Dm.user, ...prev])\r\n            }\r\n        }\r\n    }, [Dm, user, onJoin, logs])\r\n\r\n    const click = (button) => () => {\r\n        setButton(button)\r\n        if (button === \"online\") setScreen(<Friends click={clickEvent} online={true} user={user} />)\r\n        if (button === \"add\") setScreen(<Add user={user} />)\r\n        if (button === \"pending\") setScreen(<Pending user={user} />)\r\n        if (button === \"all\") setScreen(<Friends click={clickEvent} user={user} />)\r\n    }\r\n\r\n    const getFriends = () => {\r\n        setButton(\"online\")\r\n        setDm()\r\n        setScreen(<Friends click={clickEvent} online={true} user={user} />)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"messages\">\r\n                <div className={`name name-${button}`}>\r\n                    {!Dm ? <div>\r\n                        <button onClick={click(\"online\")} className=\"online\">Online</button>\r\n                        <button onClick={click(\"all\")} className=\"all\">All</button>\r\n                        <button onClick={click(\"pending\")} className=\"pending\">Pending</button>\r\n                        <button onClick={click(\"add\")} className=\"add-friend\">Add friend</button>\r\n                    </div> :\r\n                        <div>\r\n                            <img className=\"who-am-i-talking-to\" height=\"20\" width=\"20\" alt=\"pfp\" src={Dm.user.displayAvatarURL(80)} />\r\n                            <div style={{ marginLeft: 24 }} className=\"channel-title\"><span>{Dm.user.username}</span></div>\r\n                        </div>\r\n                    }</div>\r\n                <div className=\"server-name\"></div>\r\n                <div className=\"channels\">\r\n                    <div onClick={getFriends} className={`friends-click ${!Dm && \"friends-clicked\"}`}>Friends</div>\r\n                    <h4 className=\"direct-messages\">DIRECT MESSAGES</h4>\r\n                    {logs.map(u => {\r\n                        const user = new User(u)\r\n                        const click = () => setDm({ user })\r\n                        return (\r\n                            <div onClick={click} key={user.id} style={{ opacity: 1 }} className={`member ${Dm?.user.id === user.id && \"member-clicked\"} ${!user.online && \"member-offline\"}`}>\r\n                                <div className=\"member-avatar\">\r\n                                    <img width=\"38\" height=\"38\" src={user.displayAvatarURL(90)} alt=\"avatar\" className={`member-icon`} />\r\n                                    <div className=\"member-is-online\" />\r\n                                </div>\r\n                                <div className=\"nice-div\">\r\n                                    <h4 className={`member-name`}>{user.username}</h4>\r\n                                    <p className=\"is-online\">{user.online ? \"Online\" : \"Offline\"}</p>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n                <div className=\"wrapper\">\r\n                    {screen}\r\n                </div>\r\n            </div>\r\n            <div>{me.toIcon()}</div>\r\n            {view}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home","const Crown = ({ size }) => {\r\n    return (\r\n        <svg height={size} width={size} version=\"1.1\" id=\"crown\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\" style={{enableBackground: 'new 0 0 512 512'}} xmlSpace=\"preserve\">\r\n        <circle style={{fill: '#F95FF2'}} cx=\"50.637\" cy=\"264.44\" r=\"50.637\" />\r\n        <circle style={{fill: '#AB15A4'}} cx=\"461.363\" cy=\"264.44\" r=\"50.637\" />\r\n        <polygon style={{fill: '#E7C05C'}} points=\"405.099,416.352 461.363,393.846 495.121,50.637 458.844,76.244 \" />\r\n        <polygon style={{fill: '#FFD875'}} points=\"375.557,135.033 255.993,50.637 136.434,135.033 16.879,50.637 50.637,416.352 \r\n\t425.391,416.352 458.844,76.244 \" />\r\n        <circle style={{fill: '#D0A842'}} cx={256} cy=\"264.44\" r=\"84.396\" />\r\n        <path style={{fill: '#FEDFFD'}} d=\"M461.363,393.846h-33.758v67.517h33.758c18.645,0,33.758-15.114,33.758-33.758\r\n\tC495.121,408.96,480.007,393.846,461.363,393.846z\" />\r\n        <path style={{fill: '#FFF3EE'}} d=\"M461.363,427.604c0-18.645-15.114-33.758-33.758-33.758H50.637\r\n\tc-18.645,0-33.758,15.114-33.758,33.758c0,18.645,15.114,33.758,33.758,33.758h376.967\r\n\tC446.249,461.363,461.363,446.249,461.363,427.604z\" />\r\n        <path style={{fill: '#AB15A4'}} d=\"M256,213.802v101.275c27.966,0,50.637-22.671,50.637-50.637S283.966,213.802,256,213.802z\" />\r\n        <path style={{fill: '#D23ACB'}} d=\"M272.879,264.44c0-27.966-7.557-50.637-16.879-50.637c-27.966,0-50.637,22.671-50.637,50.637\r\n\ts22.671,50.637,50.637,50.637C265.322,315.077,272.879,292.406,272.879,264.44z\" />\r\n        <g>\r\n          <circle style={{fill: '#E7C05C'}} cx=\"89.673\" cy=\"317.89\" r=\"8.44\" />\r\n          <circle style={{fill: '#E7C05C'}} cx=\"123.431\" cy=\"351.648\" r=\"8.44\" />\r\n        </g>\r\n      </svg>\r\n    )\r\n}\r\n\r\nexport default Crown","import \"./index.css\"\r\nimport { useContext, useLayoutEffect, useRef, useState } from 'react'\r\nimport Utils from \"../../utils\"\r\nimport { link } from \"../../config.json\"\r\nimport UserSettings from \"./user-settings\"\r\nimport Gear from \"../../icons/settings\"\r\nimport { ScreenContext, socket } from \"../../app/message\"\r\nimport Home from \"../../app/message/home\"\r\nimport { Update } from \"../../app\"\r\nimport Crown from \"../../icons/crown\"\r\n\r\nconst Icon = (user) => {\r\n    const { setUser } = useContext(ScreenContext)\r\n    const me = new User(user)\r\n    const editHandler = (u) => {\r\n        setUser(u)\r\n        appear()\r\n    }\r\n    const save = () => {\r\n        user.view(<UserSettings onEdit={editHandler} user={me} name=\"bigger waiting\" onClickOut={disappear} />)\r\n    }\r\n    const appear = () => user.view(<UserSettings onEdit={editHandler} user={me} name=\"bigger\" onClickOut={disappear} onSave={save} />)\r\n    const disappear = () => {\r\n        user.view(<UserSettings onEdit={editHandler} user={me} name=\"smaller\" onClickOut={disappear} />)\r\n        setTimeout(() => user.view(), 100)\r\n    }\r\n    return (\r\n        <footer className=\"footer\">\r\n            <img className=\"my-pfp\" src={me.displayAvatarURL(80)} alt=\"icon\" />\r\n            <h5 className=\"my-username\">{me.username}<span>{me.tag}</span></h5>\r\n            <div onClick={appear} className=\"settings-button\"><Gear width={20} height={20} /></div>\r\n        </footer>\r\n    )\r\n}\r\n\r\nconst MemberX = ({ server, me, member }) => {\r\n    const [isClicked, setIsClicked] = useState(false)\r\n    const showUser = (e) => {\r\n        setIsClicked(true)\r\n        const cancel = () => {\r\n            setIsClicked(false)\r\n            member.view()\r\n        }\r\n        const top = e.target.getBoundingClientRect().top - 40\r\n        member.view(\r\n            <Utils.Out click={cancel}>\r\n                {member.toJSX({ right: 255, top, animationName: \"reverseShift\" }, server, me)}\r\n            </Utils.Out>\r\n        )\r\n    }\r\n    return (\r\n        <div onClick={showUser} key={member.id} className={`member ${isClicked && \"member-clicked\"} ${!member.online && \"member-offline\"}`}>\r\n            <div className=\"member-avatar\">\r\n                <img width=\"38\" height=\"38\" src={member.displayAvatarURL(90)} alt=\"avatar\" className={`member-icon`} />\r\n                <div className=\"member-is-online\" />\r\n            </div>\r\n            <div className=\"nice-div\">\r\n                <h4 className={`member-name ${server?.owner === member.id && \"owner\"}`}>{member.username} {server?.owner === member.id && <Crown size={16} />}</h4>\r\n                <p className=\"is-online\">{member.online ? \"Online\" : \"Offline\"}</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nclass User {\r\n    constructor(user) {\r\n        this.username = user.username\r\n        this.avatarURL = user.avatarURL\r\n        this.id = user._id\r\n        this._id = user._id\r\n        this.token = user.token\r\n        this.tag = user.tag\r\n        this.view = user.view\r\n        this.profileColor = user.profileColor\r\n        this.servers = user.servers\r\n        this.update = user.update\r\n        this.password = user.password\r\n        this.email = user.email\r\n        this.online = user.online\r\n    }\r\n    static MapMembers({ members, server, setView, me }) {\r\n        const onlineLength = members.filter(m => m?.online).length, offlineLength = members.length - onlineLength\r\n        const online = [<h5 className=\"members-title\" key=\"online\">ONLINE — {onlineLength}</h5>],\r\n            offline = [<h5 className=\"members-title\" key=\"offline\">OFFLINE — {offlineLength}</h5>]\r\n        const sortedMembers = members.sort((a, b) => a.username.localeCompare(b.username))\r\n        for (const member of sortedMembers) {\r\n            const Member = new User(Object.assign(member, { view: setView }))\r\n            const jsx = <MemberX member={Member} key={Member.id} server={server} me={me} />\r\n            if (member.online) online.push(jsx)\r\n            else offline.push(jsx)\r\n        }\r\n        if (offline.length === 1) offline.length = 0\r\n        if (online.length === 1) online.length = 0\r\n        return online.concat(offline)\r\n    }\r\n    displayAvatarURL(size) {\r\n        return `${link + this.avatarURL}?${size ? `width=${size}&height=${size}` : \"\"}`\r\n    }\r\n    toIcon() {\r\n        return Icon(this)\r\n    }\r\n    toJSX(style, server, me) {\r\n        const Component = () => {\r\n            const { setScreen, setServer } = useContext(ScreenContext)\r\n            const update = useContext(Update)\r\n            const [online, setOnline] = useState(this.online)\r\n            const [top, setTop] = useState(style.top)\r\n            const divRef = useRef()\r\n            useLayoutEffect(() => {\r\n                let isMounted = true\r\n                socket.on(\"online\", id => {\r\n                    if (isMounted && this.id === id) setOnline(true)\r\n                })\r\n                socket.on(\"offline\", id => {\r\n                    if (isMounted && this.id === id) setOnline(false)\r\n                })\r\n                const viewportOffset = divRef.current.getBoundingClientRect();\r\n                if (style.top > window.innerHeight - viewportOffset.height - 20) setTop(window.innerHeight - viewportOffset.height - 20)\r\n                return () => { isMounted = false }\r\n            }, [])\r\n\r\n            const dm = (e) => {\r\n                if (e.code !== \"Enter\") return\r\n                setServer()\r\n                const fakeEvent = { code: \"Enter\", target: { textContent: e.target.value } }\r\n                setScreen(<Home update={update} dm={{ user: this, message: fakeEvent }} user={me} />)\r\n            }\r\n            const saveNote = (e) => localStorage.setItem(this.id, e.target.value)\r\n\r\n            return (\r\n                <div ref={divRef} style={{ ...style, top, \"--profile\": this.profileColor || \"#000\" }} className={`user-div ${!online && \"not-online\"}`}>\r\n                    <div className=\"avatar-wrapper\">\r\n                        <img width=\"88\" height=\"88\" src={this.displayAvatarURL(90)} alt=\"avatar\" className=\"user-avatar\" />\r\n                        <div className=\"status\"></div>\r\n                    </div>\r\n                    <h5 className=\"user-username\">{this.username}<span>{this.tag}</span></h5>\r\n                    <div className=\"line first\"></div>\r\n                    {server &&\r\n                        <div className=\"roles\">\r\n                            <h5>ROLES</h5>\r\n                            <div className=\"role\">Member</div>\r\n                            {server.owner === this.id && <div className=\"role\">Owner</div>}\r\n                            <div className=\"line last\"></div>\r\n                        </div>\r\n                    }\r\n                    <div className=\"note\">\r\n                        <h5>NOTE</h5>\r\n                        <textarea onChange={saveNote} defaultValue={localStorage.getItem(this.id)} placeholder=\"Click to add a note\"></textarea>\r\n                    </div>\r\n                    {me._id !== this.id && <input onKeyDown={dm} placeholder={`Message ${this.username}${this.tag}`} className=\"dm-user\" />}\r\n                </div>\r\n            )\r\n        }\r\n        return <Component />\r\n    }\r\n    async fetch() {\r\n        const response = await fetch(`${link}fetch/${this.id}`).then(res => res.json())\r\n        this.avatarURL = response.avatarURL\r\n        this.username = response.username\r\n        return new User(Object.assign({ _id: this.id }, response))\r\n    }\r\n    async edit(username, data, profileColor) {\r\n        const edit = await fetch(`${link}user/edit`, {\r\n            method: \"PATCH\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: this.token\r\n            },\r\n            body: JSON.stringify({ username, data, profileColor })\r\n        }).then(res => res.json())\r\n            .catch(console.log)\r\n\r\n        this.avatarURL = edit.avatarURL\r\n        this.username = edit.username\r\n        return edit\r\n    }\r\n}\r\n\r\nexport default User","function Dots({ size }) {\r\n    return (\r\n        <svg style={{ transform: \"rotate(90deg)\" }} width={size} height={size} viewBox=\"0 0 24 24\">\r\n            <rect id=\"view-box\" width=\"24\" height=\"24\" fill=\"currentColor\" opacity=\"0\" />\r\n            <path id=\"Shape\" d=\"M12,1.5A1.5,1.5,0,1,1,13.5,3,1.5,1.5,0,0,1,12,1.5Zm-6,0A1.5,1.5,0,1,1,7.5,3,1.5,1.5,0,0,1,6,1.5Zm-6,0A1.5,1.5,0,1,1,1.5,3,1.5,1.5,0,0,1,0,1.5Z\" transform=\"translate(4.5 11)\" fill=\"currentColor\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default Dots","import Utils from \"../../utils\"\r\n\r\nconst MessageDelete = ({ name, message, onCancel }) => {\r\n    const del = () => {\r\n        message.delete()\r\n        onCancel()\r\n    }\r\n    return (\r\n        <div className={`dark-div ${name}`}>\r\n            <Utils.Out click={onCancel}>\r\n                <div className={`dlt ${name}`}>\r\n                    <h2 className=\"some-text\">Delete message</h2>\r\n                    <h4 className=\"dumb-question\">Are you sure you want to delete this message?</h4>\r\n                    <div className=\"preview-message\">{message.toJSX()}</div>\r\n                    <div className=\"create-server\">\r\n                        <button style={{ color: \"var(--font-primary)\" }} onClick={onCancel} className=\"create-server-button cancel-creating\">Cancel</button>\r\n                        <button className=\"create-server-button delete-message\" onClick={del}>Delete</button>\r\n                    </div>\r\n                </div>\r\n            </Utils.Out>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MessageDelete","import Server from \"../server\"\r\nimport { useState } from \"react\"\r\nimport { link } from \"../../config.json\"\r\n\r\nconst Invite = ({ invite, code, onJoin, me }) => {\r\n    const server = new Server(invite)\r\n    const text = me.servers.find(s => s._id === server.id) ? \"Joined\" : \"Join\"\r\n    const [state, setState] = useState(text)\r\n\r\n    const join = () => {\r\n        setState(\"...\")\r\n        if (text === \"Joined\" || state === \"...\") return\r\n        fetch(`${link}servers/${code}`, { method: \"POST\", headers: { Authorization: me.token } })\r\n            .then((res) => res.json())\r\n            .then((server) => {\r\n                setState(\"Joined\")\r\n                onJoin(server)\r\n            })\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"message-invite\">\r\n            <img width=\"40\" height=\"40\" className=\"server-invite-icon\" src={server.displayIcon(57)} alt=\"icon\" />\r\n            <div className=\"name-and-members\">\r\n                <h4 className=\"server-invite-name\">{server.name}</h4>\r\n                <div className=\"member-count\">{invite.members.length} member{invite.members.length !== 1 && \"s\"}</div>\r\n            </div>\r\n            <button onClick={join} className=\"server-invite-join\">{state}</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Invite","import User from \"../user\"\r\nimport \"./index.css\"\r\nimport Utils from \"../../utils\"\r\nimport Dots from \"../../icons/3dots\"\r\nimport Delete from \"./delete-message\"\r\nimport { link } from \"../../config.json\"\r\nimport Invite from \"./invite\"\r\nimport { useContext, useState } from \"react\"\r\nimport { UserContext } from \"../../app/message\"\r\n\r\nconst Attachment = ({ message }) => {\r\n    const View = ({ name }) => {\r\n        return (\r\n            <div style={{ pointerEvents: \"all\" }} className={`darken ${!name && \"slide\"}`}>\r\n                <Utils.Out click={del}>\r\n                    <img className={`view-attachment ${name}`} src={link + message.attachment.URL} alt=\"attachment\" />\r\n                </Utils.Out>\r\n            </div>\r\n        )\r\n    }\r\n    const del = () => {\r\n        message.setView(<View name=\"smaller\" />)\r\n        setTimeout(() => message.setView(), 100)\r\n    }\r\n    const click = () => {\r\n        message.setView(<View name=\"bigger\" />)\r\n        setTimeout(() => message.setView(<View />), 100)\r\n    }\r\n    const [bg, setBg] = useState(\r\n        <div className=\"rotating\">\r\n            <div className=\"rotating-div-1\" />\r\n            <div className=\"rotating-div-2\" />\r\n        </div>\r\n    )\r\n    return (\r\n        <div className=\"image-div\">\r\n            {bg}\r\n            <img onLoad={() => setBg()} loading=\"lazy\" width={message.calculateImage.width} height={message.calculateImage.height} src={message.displayAttachmentURL} className=\"message-attachment\" alt=\"attachment\" onClick={click} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Menu = ({ style, message, clickOut }) => {\r\n    const me = useContext(UserContext)\r\n    const deleteD = () => {\r\n        message.setView(<Delete onCancel={deleteD} name=\"smaller\" message={message} />)\r\n        setTimeout(() => message.setView(), 100)\r\n    }\r\n    const deleteE = () => message.setView(<Delete onCancel={deleteD} name=\"bigger\" message={message} />)\r\n    return (\r\n        <Utils.Out click={clickOut}>\r\n            <div style={style} className=\"message-menu\">\r\n                {me._id === message.author.id && <p className=\"editor option\">Edit</p>}\r\n                <p onClick={deleteE} className=\"deletor option\">Delete</p>\r\n            </div>\r\n        </Utils.Out>\r\n    )\r\n}\r\n\r\nclass Message {\r\n    constructor(message, me, onJoin, server) {\r\n        this.author = new User(message.author)\r\n        this.content = message.content\r\n        this.attachment = message.attachment\r\n        this.timestamp = new Date(message.timestamp)\r\n        this.id = message._id\r\n        this.invite = message.invite\r\n        this.unsent = message.unsent\r\n        this.server = server\r\n        this.channel = message.channel\r\n        this.Authorization = me?.token\r\n        this.me = me\r\n        this.setMessages = message.setMessages\r\n        this.onJoin = onJoin\r\n        this.failed = message.failed\r\n    }\r\n    static Map({ messages, setView, setMessages, me, onJoin, server }) {\r\n        const jsx = messages.map((message, i) => {\r\n            const mapped = new Message(Object.assign(message, { setMessages }), me, onJoin, server)\r\n            mapped.getView(setView)\r\n            return (\r\n                mapped.author.id === messages[i - 1]?.author._id && mapped.timestamp - messages[i - 1]?.timestamp < 600000 ?\r\n                    mapped.toJSXMin() : mapped.toJSX()\r\n            )\r\n        })\r\n        return jsx.reverse()\r\n    }\r\n    getView(setView) {\r\n        this.setView = setView\r\n    }\r\n    toJSX() {\r\n        const click = async (e) => {\r\n            const viewportOffset = e.target.getBoundingClientRect();\r\n            this.setView(\r\n                <Utils.Out click={() => this.setView()}>\r\n                    {this.author.toJSX({\r\n                        left: viewportOffset.left + viewportOffset.width + 7 < window.innerWidth - 275 ? viewportOffset.left + viewportOffset.width + 7 : window.innerWidth - 275,\r\n                        top: viewportOffset.top - 60\r\n                    }, this.server, this.me)}\r\n                </Utils.Out>\r\n            )\r\n        }\r\n        const join = (server) => this.onJoin(server)\r\n        const menu = (e) => {\r\n            const viewportOffset = e.target.getBoundingClientRect();\r\n            const style = {\r\n                top: viewportOffset.top,\r\n                left: viewportOffset.left,\r\n                zIndex: 4\r\n            }\r\n            const out = () => this.setView()\r\n            this.setView(<Menu clickOut={out} style={style} message={this} />)\r\n        }\r\n        const message = (\r\n            <div key={this.id} className={`message-div ${this.unsent ? \"unsent\" : \"\"}`} style={{ marginTop: \"15px\" }}>\r\n                <img onClick={click} width=\"40\" height=\"40\" className=\"author-icon\" src={this.author.displayAvatarURL(90)} alt=\"avatar\" />\r\n                <div className=\"message-content\">\r\n                    <p className=\"author-name\"><span onClick={click} className=\"exact-author\">{this.author.username}</span><span className=\"exact-time\">{this.createdAt}</span></p>\r\n                    <p className={`text ${(this.unsent ? \"unsent-message \" : \" \") + (this.failed ? \"failed-tosend\" : \"\")}`}>{this.content}</p>\r\n                    {this.attachment?.URL && this.Attachment}\r\n                    {this.invite?._id && <Invite me={this.me} onJoin={join} invite={this.invite} code={this.#inviteCode} />}\r\n                </div>\r\n                <div onClick={menu} tabIndex=\"0\" className=\"message-params\"><Dots size={22} /></div>\r\n            </div>\r\n        )\r\n        return message\r\n    }\r\n    get calculateImage() {\r\n        if (this.attachment.height < 300 && this.attachment.width < 400) return {\r\n            height: this.attachment.height,\r\n            width: this.attachment.width\r\n        }\r\n        if (this.attachment.height >= this.attachment.width) {\r\n            return { height: 300, width: this.attachment.width / this.attachment.height * 300 }\r\n        }\r\n        if (this.attachment.height / this.attachment.width * 400 > 300) return { height: 300, width: this.attachment.width / this.attachment.height * 300 }\r\n        return { width: 400, height: this.attachment.height / this.attachment.width * 400 }\r\n    }\r\n    get createdAt() {\r\n        const date = this.timestamp\r\n        const today = new Date(Date.now())\r\n        const minutes = `${`${date.getHours()}`.padStart(2, '0')}:${`${date.getMinutes()}`.padStart(2, '0')}`\r\n        if (date.getMonth() === today.getMonth() && date.getFullYear() === today.getFullYear()) {\r\n            if (date.getDay() === today.getDay()) return `Today at ${minutes}`\r\n            if (today.getDay() - date.getDay() === 1) return `Yesterday at ${minutes}`\r\n            return date.toLocaleDateString()\r\n        }\r\n        return date.toLocaleDateString()\r\n    }\r\n    toJSXMin() {\r\n        const join = (server) => this.onJoin(server)\r\n        const menu = (e) => {\r\n            const viewportOffset = e.target.getBoundingClientRect();\r\n            const style = {\r\n                top: viewportOffset.top,\r\n                left: viewportOffset.left,\r\n                zIndex: 4\r\n            }\r\n            const out = () => this.setView()\r\n            this.setView(<Menu clickOut={out} style={style} message={this} />)\r\n        }\r\n        return (\r\n            <div style={{ paddingTop: \"4px\", paddingBottom: \"4px\" }} className=\"message-div min\" key={this.id}>\r\n                <p className=\"createdAt\">{`${this.timestamp.getHours()}`.padStart(2, '0')}:{`${this.timestamp.getMinutes()}`.padStart(2, '0')}</p>\r\n                <p className={`min-text ${(this.unsent ? \"unsent-message \" : \" \") + (this.failed ? \"failed-tosend\" : \"\")}`}>{this.content}</p>\r\n                {this.attachment?.URL && this.Attachment}\r\n                {this.invite?._id && <Invite me={this.me} onJoin={join} invite={this.invite} code={this.#inviteCode} />}\r\n                <div onClick={menu} tabIndex=\"0\" className=\"message-params\"><Dots size={22} /></div>\r\n            </div>\r\n        )\r\n    }\r\n    get Attachment() {\r\n        return <Attachment message={this} />\r\n    }\r\n    get displayAttachmentURL() {\r\n        const query = this.calculateImage.height !== this.attachment.height && this.calculateImage.width !== this.attachment.width ?\r\n            `?width=${Math.trunc(this.calculateImage.width)}&height=${Math.trunc(this.calculateImage.height)}` : \"\"\r\n        return link + this.attachment.URL + query\r\n    }\r\n    async delete() {\r\n        const message = await fetch(`${link}channels/${this.channel}/messages/${this.id}`, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n                Authorization: this.Authorization\r\n            }\r\n        })\r\n            .then(res => res.json())\r\n        return message\r\n    }\r\n    get #inviteCode() {\r\n        const invite = this.content.match(/(^|\\s)server\\/.{7}(?=\\s|$)/g)[0]\r\n        return invite.split(\"/\")[1]\r\n    }\r\n}\r\n\r\nexport default Message","const Hashtag = ({ size }) => {\r\n    return (\r\n        <svg height={size} viewBox=\"0 0 24 24\" width={size}>\r\n            <path d=\"M11.03 8h3.94l1.06-4.24a1 1 0 1 1 1.94.48L17.03 8H20a1 1 0 0 1 0 2h-3.47l-1 4H18a1 1 0 1 1 0 2h-2.97l-1.06 4.25a1 1 0 1 1-1.94-.49l.94-3.76H9.03l-1.06 4.25a1 1 0 1 1-1.94-.49L6.97 16H4a1 1 0 0 1 0-2h3.47l1-4H6a1 1 0 0 1 0-2h2.97l1.06-4.24a1 1 0 1 1 1.94.48L11.03 8zm-.5 2l-1 4h3.94l1-4h-3.94z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default Hashtag","import { useEffect, useState } from \"react\";\r\nimport \"./index.css\";\r\nimport { link } from \"../../config.json\"\r\nimport Message from \"../message\";\r\nimport Hashtag from \"../../icons/hashtag\";\r\n\r\nconst components = {\r\n    LoadChannels: (channels, server, click) => {\r\n        const [state, setState] = useState(0)\r\n        useEffect(() => setState(0), [channels])\r\n        const jsx = channels.map((c, i) => {\r\n            const channel = new Channel(c, server)\r\n            return channel.toJSX(state === i, () => {\r\n                click(channel)\r\n                setState(i)\r\n            })\r\n        })\r\n        return jsx\r\n    }\r\n}\r\n\r\nclass Channel {\r\n    constructor(channel, server) {\r\n        this.name = channel.name\r\n        this.id = channel._id\r\n        this.server = server\r\n    }\r\n    static LoadChannels = components.LoadChannels\r\n    toJSX(isClicked, click) {\r\n        return (\r\n            <div key={this.id} onClick={click} className={`channel ${isClicked ? \"c-clicked\" : \"\"}`}>\r\n                <Hashtag size={25} />\r\n                <span>{this.name}</span>\r\n            </div>\r\n        )\r\n    }\r\n    toTitle() {\r\n        return (\r\n            <div className=\"channel-title\">\r\n                <Hashtag size={30} />\r\n                <span>{this.name}</span>\r\n            </div>\r\n        )\r\n    }\r\n    join(socket, token) {\r\n        socket.emit(\"join\", { channel: this.id, Authorization: token })\r\n    }\r\n    async fetchMessages(token) {\r\n        const Messages = await fetch(`${link}channels/${this.id}/messages`, { \r\n            headers: { Authorization: token }\r\n        })\r\n            .then(res => res.json())\r\n            .catch(() => [])\r\n        return Messages\r\n    }\r\n    async send(message) {\r\n        const msg = await fetch(`${link}channels/${this.id}/messages`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: message.author.token\r\n            },\r\n            body: JSON.stringify(message)\r\n        })\r\n            .then(res => res.json())\r\n        return new Message(msg)\r\n    }\r\n}\r\n\r\nexport default Channel","import { useState } from \"react\"\r\nimport Utils from \"../../utils\"\r\n\r\nconst ImagePreview = ({ src, onCancel, onSend, animation, channel, name }) => {\r\n    const [value, setValue] = useState()\r\n    const change = (e) => setValue(e.target.value)\r\n\r\n    return (\r\n        <div className={`dark-div ${animation}`}>\r\n            <Utils.Out click={onCancel}>\r\n                <div className={`image-preview ${animation}`}>\r\n                    <img className=\"image-preview-img\" src={src} alt=\"base64 preview\" />\r\n                    <p className=\"file-name\">{name || \"image\"}</p>\r\n                    <p className=\"to-channel\">Upload to {channel?.name}</p>\r\n                    <label htmlFor=\"comment\" className=\"add-comment\">Add a comment</label>\r\n                    <input name=\"comment\" onChange={change}/>\r\n                    <div className=\"create-server\">\r\n                        <button style={{ color: \"var(--font-primary)\" }} onClick={onCancel} className=\"create-server-button cancel-creating\">Cancel</button>\r\n                        <button onClick={() => onSend(value)} className=\"create-server-button send-attachment\">Send</button>\r\n                    </div>\r\n                </div>\r\n            </Utils.Out>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImagePreview","const Skeleton = () => (\r\n    <div className=\"member-skeleton\">\r\n        <div className=\"member-skeleton-pfp\"></div>\r\n        <div className=\"nice-div\">\r\n            <div className=\"member-skeleton-name\"></div>\r\n            {Math.random() > 0.5 && <div className=\"member-skeleton-status\"></div>}\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default function MemberLoading({ times }) {\r\n    return [...Array(times)].map((_, i) => <Skeleton key={i} />)\r\n}","const Down = ({ size }) => {\r\n    return (\r\n        <svg width={size} height={size} viewBox=\"0 0 48 48\" fill=\"none\">\r\n            <path d=\"M37 18L25 30L13 18\" stroke=\"var(--font-primary)\" strokeWidth=\"4\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default Down","import { useContext, useEffect, useState } from \"react\";\r\nimport { UserContext } from \"../../app/message\";\r\nimport Plus from \"../../icons/plus\";\r\nimport \"./options.css\"\r\nimport { link } from \"../../config.json\"\r\nimport User from \"../user\";\r\n\r\nconst InvitePeople = ({ server, quit, animation }) => {\r\n    const [friends, setFriends] = useState()\r\n    const [ids, setIds] = useState([])\r\n    const [filter, setFilter] = useState(\"\")\r\n    const me = useContext(UserContext)\r\n\r\n    useEffect(() => {\r\n        let isMounted = true\r\n        fetch(`${link}friends`, {\r\n            headers: {\r\n                Authorization: me.token\r\n            }\r\n        }).then(res => res.json())\r\n            .then(friends => {\r\n                if (isMounted) setFriends(friends)\r\n            })\r\n        return () => { isMounted = false }\r\n    }, [me])\r\n\r\n    const copy = () => navigator.clipboard.writeText(\"server/\" + server.invites[0]);\r\n\r\n    return (\r\n        <div className={`invite-people-div ${animation}`}>\r\n            <div className=\"part-1\">\r\n                <h3>INVITE PEOPLE TO {server.name.toUpperCase()}</h3>\r\n                <input onChange={(e) => setFilter(e.target.value)} placeholder=\"Search for friends\" />\r\n                <Plus onClick={quit} size={25} />\r\n            </div>\r\n            <div className=\"part-2\">\r\n                {!friends && <p className=\"searching\">SEARCHING FOR FRIENDS</p>}\r\n                {friends && !friends.some(u => u.username.toLowerCase().includes(filter.toLowerCase())) && <p className=\"searching\">NO RESULTS WERE FOUND</p>}\r\n                {friends && friends.map(f => {\r\n                    const user = new User(f)\r\n                    const click = () => {\r\n                        fetch(`${link}dm/${user.id}`, {\r\n                            method: \"POST\",\r\n                            headers: {\r\n                                Authorization: me.token,\r\n                                \"Content-Type\": \"application/json\"\r\n                            },\r\n                            body: JSON.stringify({\r\n                                content: \"server/\" + server.invites[0]\r\n                            })\r\n                        })\r\n                            .catch(console.error)\r\n                        setIds(prev => [...prev, user.id])\r\n                    }\r\n                    if (filter && !user.username.toLowerCase().includes(filter.toLowerCase())) return null\r\n                    return (\r\n                        <div key={user.id} className=\"invite-friend\">\r\n                            <img alt={user.id} width=\"34\" height=\"34\" src={user.displayAvatarURL(80)} />\r\n                            <h5>{user.username}</h5>\r\n                            <button className={`${ids.includes(user.id) && \"invited\"}`} onClick={click}>{ids.includes(user.id) ? \"Sent\" : \"Invite\"}</button>\r\n                        </div>\r\n                    )\r\n                })}\r\n            </div>\r\n            <div className=\"part-3\">\r\n                <h4>OR, SEND A SERVER INVITE LINK TO A FRIEND</h4>\r\n                <div>\r\n                    <button onClick={copy}>Copy</button>\r\n                    <input readOnly={true} value={\"server/\" + server.invites[0]} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InvitePeople","import { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../app/message\"\r\nimport Utils from \"../../utils\"\r\nimport { link } from \"../../config.json\"\r\n\r\nconst toBase64 = file => new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n        const img = new Image()\r\n        img.onload = () => resolve(reader.result);\r\n        img.src = reader.result\r\n    }\r\n    reader.onerror = error => reject(error);\r\n});\r\n\r\n// I HATE THIS COMPONENT SO MUCH\r\nconst EditServer = ({ server, animation, quit }) => {\r\n    const [src, setSrc] = useState(server.displayIcon(100, 100))\r\n    const [name, setName] = useState(\"\")\r\n    const user = useContext(UserContext)\r\n    const handleNameChange = e => setName(e.target.value)\r\n    const handleFileChange = async e => {\r\n        const file = e.target.files[0]\r\n        const data = await toBase64(file).catch(() => 0)\r\n        if (data) setSrc(data)\r\n    }\r\n    const save = () => {\r\n        fetch(`${link}server/${server.id}`, {\r\n            method: \"PATCH\",\r\n            body: JSON.stringify({ icon: src, name }),\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: user.token\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className={`dark-div ${animation}`}>\r\n            <Utils.Out click={quit}>\r\n                <div className={`edit-server ${animation}`}>\r\n                    <div className=\"server-edit-icon\">\r\n                        <img height=\"100\" width=\"100\" src={src} alt=\"icon\" />\r\n                        <label className=\"upload-button\" htmlFor=\"xx3\">Upload Image</label>\r\n                        <input id=\"xx3\" name=\"upload\" className=\"upload-file\" onChange={handleFileChange} type=\"file\"/>\r\n                    </div>\r\n                    <div className=\"server-info\">\r\n                        <h3>Edit Server</h3>\r\n                        <label htmlFor=\"bruh\">SERVER NAME</label>\r\n                        <input className=\"change-server-name\" onChange={handleNameChange} name=\"bruh\" defaultValue={server.name} />\r\n                        <button onClick={save}>Save</button>\r\n                    </div>\r\n                </div>\r\n            </Utils.Out>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditServer","import { useContext, useState } from \"react\";\r\nimport { UserContext } from \"../../app/message\";\r\nimport Plus from \"../../icons/plus\";\r\nimport { link } from \"../../config.json\"\r\nimport Utils from \"../../utils\";\r\nimport Hashtag from \"../../icons/hashtag\";\r\n\r\nconst CreateChannel = ({ server, quit, animation }) => {\r\n    const user = useContext(UserContext)\r\n    const [settings, setSettings] = useState({ name: \"\", type: \"text\" })\r\n    const [waiting, setWaiting] = useState(\"\")\r\n\r\n    const handleInputChange = (e) => setSettings(prev => ({ name: e.target.value, type: prev.type }))\r\n\r\n    const create = async () => {\r\n        if (!settings.name) return\r\n        setWaiting(\"waiting\")\r\n        await fetch(`${link}servers/${server.id}/channels`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                Authorization: user.token\r\n            },\r\n            body: JSON.stringify(settings)\r\n        })\r\n        quit()\r\n    }\r\n\r\n    return (\r\n        <div className={`dark-div ${animation}`}>\r\n            <Utils.Out click={quit}>\r\n                <div className={`invite-people-div ${animation} ${waiting}`}>\r\n                    <div style={{ textAlign: 'center' }} className=\"part-1\">\r\n                        <h3 style={{ fontSize: '20px', marginTop: 30 }}>Create Text Channel</h3>\r\n                        <Plus onClick={quit} size={25} />\r\n                    </div>\r\n                    <div className=\"check-boxes\">\r\n                        <h5>CHANNEL TYPE</h5>\r\n                        <div className=\"check\">\r\n                            <div className=\"checker\"/>\r\n                            <Hashtag size={28} />\r\n                            <div className=\"channel-type\">\r\n                                <h4>Text Channel</h4>\r\n                                <p>Post images, GIFs, opinions and puns</p>\r\n                            </div>\r\n                        </div>\r\n                        <h5>CHANNEL NAME</h5>\r\n                        <input onChange={handleInputChange} style={{ marginTop: 0, height: 35 }} className=\"change-server-name\" />\r\n                    </div>\r\n                    <div className=\"create-server\">\r\n                        <button onClick={quit} style={{ color: \"var(--font-primary)\" }} className=\"create-server-button cancel-creating\">Cancel</button>\r\n                        <button onClick={create} className={`create-server-button create-channel ${!settings.name && \"cant-click\"}`}>Create Channel</button>\r\n                    </div>\r\n                </div>\r\n            </Utils.Out>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreateChannel\r\n","import { useEffect, useState, useLayoutEffect } from \"react\"\r\nimport Channel from \"../../classes/channel\"\r\nimport User from \"../../classes/user\"\r\nimport Message from \"../../classes/message\"\r\nimport ImagePreview from \"../../classes/message/image-preview\"\r\nimport Plus from \"../../icons/plus\"\r\nimport { socket } from \".\"\r\nimport { link } from \"../../config.json\"\r\nimport SkeletonLoadingMessage from \"../../icons/bones\"\r\nimport MemberLoading from \"../../icons/members\"\r\nimport Down from \"../../icons/down\"\r\nimport Utils from \"../../utils\"\r\nimport InvitePeople from \"../../classes/server/invite-people\"\r\nimport EditServer from \"../../classes/server/server-editor\"\r\nimport CreateChannel from \"../../classes/channel/create-channel\"\r\n\r\nconst toBase64 = file => new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n        const img = new Image()\r\n        img.onload = () => resolve(reader.result);\r\n        img.src = reader.result\r\n    }\r\n    reader.onerror = error => reject(error);\r\n});\r\n\r\nconst Main = ({ user, server, update, onJoin }) => {\r\n    const [view, setView] = useState()\r\n    const me = new User(Object.assign(user, { view: setView, update }))\r\n    const [channel, setChannel] = useState()\r\n    const [messages, setMessages] = useState()\r\n    const [members, setMembers] = useState([])\r\n    const click = async (ch) => {\r\n        if (channel.id !== ch.id) setChannel(ch)\r\n    }\r\n    useLayoutEffect(() => {\r\n        let isMounted = true\r\n        setMessages()\r\n        const ch = new Channel(server.channels[0], server)\r\n        setChannel(ch)\r\n        setMembers([])\r\n        server.fetchMembers(\"no-cache\").then(members => {\r\n            if (isMounted) setMembers(members)\r\n        })\r\n        socket.on(\"online\", user => {\r\n            if (!isMounted) return\r\n            setMembers(members => {\r\n                const list = [...members]\r\n                const member = list.find(m => m._id === user.user)\r\n                if (member) member.online = user.online\r\n                return list\r\n            })\r\n        })\r\n        return () => {\r\n            socket.off(\"online\")\r\n            isMounted = false\r\n        }\r\n    }, [server, me.token])\r\n\r\n    useEffect(() => {\r\n        if (!channel) return\r\n        let isMounted = true\r\n        setMessages()\r\n        channel.join(socket, me.token)\r\n        channel.fetchMessages(me.token)\r\n            .then(({ messages }) => {\r\n                if (isMounted) setMessages(messages)\r\n            })\r\n        socket.on(\"message\", msg => {\r\n            if (!isMounted || msg.author._id === me.id) return\r\n            if (channel.id !== msg.channel) return\r\n            setMessages(prev => [...prev, msg])\r\n        })\r\n        socket.on(\"messageDelete\", msg => {\r\n            if (!isMounted) return\r\n            if (msg.channel === channel.id) setMessages(prev => [...prev].filter(m => m._id !== msg._id))\r\n        })\r\n        socket.on(\"memberUpdate\", user => {\r\n            setMessages(prev => {\r\n                const messages = [...prev]\r\n                messages.forEach(m => {\r\n                    if (`${user._id}` === m.author._id) {\r\n                        const updatedUser = Object.assign(m.author, user)\r\n                        m.author = updatedUser\r\n                    }\r\n                })\r\n                return messages\r\n            })\r\n            setMembers(prev => {\r\n                const members = [...prev]\r\n                members.forEach(m => {\r\n                    if (`${user._id}` === m._id) {\r\n                        const updatedUser = Object.assign(m, user)\r\n                        m = updatedUser\r\n                    }\r\n                })\r\n                return members\r\n            })\r\n        })\r\n        return () => {\r\n            isMounted = false\r\n            socket.off(\"message\").off(\"messageDelete\").off(\"memberUpdate\")\r\n        }\r\n    }, [channel, me.id, me.token])\r\n\r\n\r\n    const send = (message, m) => {\r\n        setMessages(prev => [...prev, m])\r\n        channel.send(message)\r\n            .then(msg => {\r\n                const update = Object.assign(m, { _id: msg.id, unsent: false, invite: msg.invite, content: msg.content })\r\n                if (msg.attachment?.URL) update.attachment = msg.attachment\r\n                setMessages(prev => {\r\n                    const allMessages = [...prev]\r\n                    const find = allMessages.find(ms => ms._id === m._id)\r\n                    allMessages[allMessages.indexOf(find)] = update\r\n                    return allMessages\r\n                })\r\n                update.author.online = msg.author.online\r\n            })\r\n            .catch((err) => {\r\n                console.error(err)\r\n                setMessages(prev => {\r\n                    const list = [...prev]\r\n                    const find = list.find(ms => ms._id === m._id)\r\n                    find.failed = true\r\n                    return list\r\n                })\r\n            })\r\n    }\r\n    const sendMessage = (k) => {\r\n        if (k.code !== \"Enter\") return\r\n        if (k.target.textContent.length === 0) return\r\n        k.preventDefault();\r\n        if (!k.target.textContent) return\r\n        const message = { author: user, content: k.target.textContent, _id: `m${Date.now()}`, timestamp: Date.now(), unsent: true, channel: channel.id }\r\n        k.target.textContent = \"\"\r\n        send(message, message)\r\n    }\r\n    const sendImage = (base64str) => {\r\n        if (!base64str) return\r\n        const cancelHandler = () => {\r\n            setView(<ImagePreview onSend={onSend} channel={channel} animation=\"smaller\" src={base64str} onCancel={cancelHandler} />)\r\n            setTimeout(() => setView(), 100)\r\n        }\r\n        const onSend = (content) => {\r\n            const message = { author: user, content: \"uploading...\", _id: `m${Date.now()}`, timestamp: Date.now(), unsent: true, channel: channel.id }\r\n            send({ author: me, attachment: base64str, content }, message)\r\n            cancelHandler()\r\n        }\r\n        setView(<ImagePreview onSend={onSend} channel={channel} animation=\"bigger\" src={base64str} onCancel={cancelHandler} />)\r\n    }\r\n    const getImageFromInput = async (e) => {\r\n        const base64str = await toBase64(e.target.files[0]).catch(() => 0)\r\n        if (!base64str) return\r\n        sendImage(base64str)\r\n        e.target.value = \"\"\r\n    }\r\n    const getImageFromPaste = async (e) => {\r\n        if (navigator.userAgent.indexOf(\"Firefox\") !== -1) {\r\n            e.preventDefault()\r\n            const text = e.clipboardData.getData(\"text\")\r\n            e.target.textContent += text\r\n        }\r\n        const items = e.clipboardData.items\r\n        const file = items[1]?.getAsFile();\r\n        const base64str = await toBase64(file).catch(() => 0)\r\n        sendImage(base64str)\r\n    }\r\n\r\n    const [skeleton, setSkeleton] = useState()\r\n    useLayoutEffect(() => {\r\n        if (!messages) {\r\n            setSkeleton(<SkeletonLoadingMessage />)\r\n        }\r\n        else setSkeleton()\r\n    }, [messages])\r\n\r\n    const [menu, setMenu] = useState()\r\n\r\n    const invite = () => {\r\n        setMenu()\r\n        const quit = () => {\r\n            setView(<IP animation=\"smaller\" />)\r\n            setTimeout(() => setView(), 100)\r\n        }\r\n        const IP = ({ animation }) => {\r\n            return (\r\n                <div className={`dark-div ${animation}`}>\r\n                    <Utils.Out click={quit}>\r\n                        <InvitePeople animation={animation} quit={quit} server={server} />\r\n                    </Utils.Out>\r\n                </div>\r\n            )\r\n        }\r\n        setView(<IP animation=\"bigger\" />)\r\n    }\r\n    const leave = () => {\r\n        fetch(`${link}leave/${server.id}`, {\r\n            method: \"PATCH\",\r\n            headers: {\r\n                Authorization: me.token\r\n            }\r\n        })\r\n    }\r\n    const createNewChannel = () => {\r\n        setMenu()\r\n        const quit = () => {\r\n            setView(<CreateChannel server={server} quit={quit} animation=\"smaller\" />)\r\n            setTimeout(() => setView(), 100)\r\n        }\r\n        setView(<CreateChannel server={server} quit={quit} animation=\"bigger\" />)\r\n    }\r\n\r\n    const serverSettings = () => {\r\n        setMenu()\r\n        const quit = () => {\r\n            setView(<EditServer server={server} quit={quit} animation=\"smaller\" />)\r\n            setTimeout(() => setView(), 100)\r\n        }\r\n        setView(<EditServer server={server} quit={quit} animation=\"bigger\" />)\r\n    }\r\n\r\n    const clickMenu = () => setMenu(\r\n        <Utils.Out click={() => setMenu()}>\r\n            <div className={`server-menu`}>\r\n                <p onClick={serverSettings}>Server Settings</p>\r\n                <p onClick={createNewChannel}>Create Channel</p>\r\n                <p onClick={invite} className=\"invite-people\">Invite People</p>\r\n                {server.owner !== user._id && <><div className=\"separator\"></div>\r\n                    <p onClick={leave} className=\"leave-server\">Leave Server</p></>}\r\n            </div>\r\n        </Utils.Out>\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            {view}\r\n            <div onClick={clickMenu} className={`server-name ${menu && \"server-name-2\"}`}>\r\n                <span>{server.name}</span>\r\n                <Down size=\"23\" />\r\n            </div>\r\n            {menu}\r\n            <div className=\"channels\">\r\n                <div style={{ marginBottom: 10 }} />\r\n                {Channel.LoadChannels(server?.channels || [], server, click)}\r\n            </div>\r\n            <div className=\"messages\">\r\n                <div className=\"name\">{channel?.toTitle()}</div>\r\n                <main className=\"messages-main\">\r\n                    <div className=\"chat\">\r\n                        {skeleton}\r\n                        {messages && <Message.Map server={server} onJoin={onJoin} me={user} messages={messages} setView={setView} setMessages={setMessages} />}\r\n                    </div>\r\n                    <div className=\"controll\">\r\n                        <div placeholder={`Send a message to ${channel?.name}`} onPaste={getImageFromPaste} onKeyDown={sendMessage}\r\n                            contentEditable={navigator.userAgent.indexOf(\"Firefox\") !== -1 ? \"true\" : \"plaintext-only\"} className=\"not-input\"></div>\r\n                        <div className=\"attach-file\">\r\n                            <input type=\"file\" onChange={getImageFromInput} />\r\n                            <Plus size={12} />\r\n                        </div>\r\n                    </div>\r\n                </main>\r\n                <div className=\"users\">\r\n                    <div className=\"members\">\r\n                        {members.length === 0 &&\r\n                            <div style={{ marginTop: 20 }}>\r\n                                <MemberLoading times={server.members.length} />\r\n                            </div>\r\n                        }\r\n                        <User.MapMembers me={user} setView={setView} members={members} server={server} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {me.toIcon()}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Main","function EmbedHomeButton() {\r\n    return (\r\n        <svg width=\"36\" height=\"36\" version=\"1.1\" id=\"Layer_1\" x=\"0px\" y=\"0px\"\r\n            viewBox=\"0 0 24 24\">\r\n            <linearGradient id=\"svg-gradient\" gradientUnits=\"userSpaceOnUse\" x1=\"2.8461\" y1=\"11.7055\" x2=\"22.1588\" y2=\"11.7055\">\r\n                <stop offset=\"0\" style={{ stopColor: \"var(--purple-no-gradient)\" }} />\r\n                <stop offset=\"1\" style={{ stopColor: \"var(--blue)\" }} />\r\n            </linearGradient>\r\n            <path className=\"st0\" d=\"M12.5,7.1l-6.9,5.7c0,0,0,0,0,0c0,0,0,0,0,0v5.7c0,0.2,0.1,0.4,0.2,0.5c0.2,0.2,0.3,0.2,0.5,0.2H11v-4.6H14v4.6\r\n\th4.6c0.2,0,0.4-0.1,0.5-0.2c0.2-0.2,0.2-0.3,0.2-0.5v-5.7c0,0,0-0.1,0-0.1L12.5,7.1z M22,11.5l-2.6-2.2V4.4c0-0.1,0-0.2-0.1-0.3\r\n\tc-0.1-0.1-0.2-0.1-0.3-0.1h-2.3c-0.1,0-0.2,0-0.3,0.1c-0.1,0.1-0.1,0.2-0.1,0.3v2.3l-2.9-2.4C13.2,4.1,12.9,4,12.5,4\r\n\tc-0.4,0-0.7,0.1-0.9,0.3L3,11.5c-0.1,0.1-0.1,0.1-0.1,0.3c0,0.1,0,0.2,0.1,0.3l0.7,0.9C3.7,13,3.8,13,3.9,13.1c0.1,0,0.2,0,0.3-0.1\r\n\tl8.3-6.9l8.3,6.9c0.1,0.1,0.1,0.1,0.3,0.1h0c0.1,0,0.2-0.1,0.3-0.1l0.7-0.9c0.1-0.1,0.1-0.2,0.1-0.3C22.1,11.7,22.1,11.6,22,11.5z\"\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default EmbedHomeButton","import { useEffect, useState, createContext } from \"react\"\r\nimport Server from \"../../classes/server\"\r\nimport \"./index.css\"\r\nimport Main from \"./message\"\r\nimport { link } from \"../../config.json\"\r\nimport { io } from \"socket.io-client\"\r\nimport Home from \"./home\"\r\nimport HomeIcon from \"../../icons/home\"\r\nimport Login from \"../login\"\r\nimport User from \"../../classes/user\"\r\n\r\nexport const ThemeContext = createContext(), ScreenContext = createContext(), UserContext = createContext()\r\nexport const socket = io(link, { transports: ['websocket', 'polling', 'flashsocket'] })\r\n\r\nconst Message = ({ user: me, update, dm }) => {\r\n    const [user, setUser] = useState(me)\r\n    const [server, setServer] = useState()\r\n    user.notifications.forEach(n => n.saved = true)\r\n    const [notifications, setNotifications] = useState(user.notifications)\r\n    const [servers, setServers] = useState(user.servers)\r\n\r\n    useEffect(() => {\r\n        socket.connect()\r\n        socket.emit(\"online\", me.token)\r\n        socket.on(\"disconnect\", () => {\r\n            update(<Login update={update} />)\r\n        })\r\n        socket.on(\"notification\", (notification) => {\r\n            if (notification.type === \"dm\") setNotifications(prev => [...prev, notification])\r\n        })\r\n        socket.on(\"leave\", (server) => {\r\n            setServer()\r\n            setUser(prev => Object.assign(prev, { servers: [...prev.servers].filter(s => s._id !== `${server._id}`) }))\r\n            setServers(prev => [...prev].filter(s => s._id !== `${server._id}`))\r\n        })\r\n        socket.on(\"channelCreate\", (channel) => {\r\n            setServers(prev => {\r\n                const servers = [...prev]\r\n                const server = servers.find(s => s._id === channel.server)\r\n                server.channels.push(channel)\r\n                return servers\r\n            })\r\n        })\r\n        return () => {\r\n            socket.off(\"disconnect\").off(\"notification\").off(\"channelCreate\")\r\n            socket.disconnect()\r\n        }\r\n    }, [me, update])\r\n\r\n    const [theme, setTheme] = useState(localStorage.getItem(\"theme\") || \"light\")\r\n    const [screen, setScreen] = useState(<Home user={user} update={update} />)\r\n    const click = (s) => {\r\n        if (server?.id === s.id) return\r\n        setServer(s)\r\n    }\r\n    const handlenewServer = (user, server) => {\r\n        user.servers.push(server)\r\n        setServers(user.servers)\r\n        const s = new Server(server, user)\r\n        setServer(s)\r\n    }\r\n    const create = (server) => handlenewServer(user, server)\r\n    const [view, setView] = useState()\r\n\r\n    useEffect(() => {\r\n        const join = (server) => handlenewServer(user, server)\r\n        if (server) setScreen(<Main socket={socket} onJoin={join} update={update} server={server} user={user} />)\r\n        else setScreen(<Home onJoin={join} dm={dm} user={user} update={update} />)\r\n        socket.on(\"serverUpdate\", server => {\r\n            setServers(prev => {\r\n                const servers = [...prev]\r\n                const sv = servers.find(s => s._id === `${server._id}`)\r\n                sv.icon = server.icon\r\n                sv.name = server.name\r\n                return servers\r\n            })\r\n        })\r\n        return () => socket.off(\"serverUpdate\")\r\n    }, [server, update, user, dm])\r\n\r\n    const homeClick = () => server && setServer()\r\n\r\n    const index = () => {\r\n        const iserver = user.servers.find(s => s._id === server?.id)\r\n        return user.servers.indexOf(iserver)\r\n    }\r\n\r\n    return (\r\n        <UserContext.Provider value={user}>\r\n            <ThemeContext.Provider value={setTheme}>\r\n                <ScreenContext.Provider value={{ setScreen, setServer, setUser, not: [notifications, setNotifications] }}>\r\n                    <div theme={theme} className=\"platform\">\r\n                        {view}\r\n                        <div className=\"navigate\">\r\n                            <div style={{ marginTop: 10, marginBottom: 3 }} className={`server ${!server && \"click\"}`}>\r\n                                <div onClick={homeClick} className={`home-button ${!server && \"isclicked\"}`}><HomeIcon /></div>\r\n                            </div>\r\n                            {notifications.map((n, i) => {\r\n                                const u = new User(n.user)\r\n                                if (notifications.findIndex(not => not.user._id === u.id) !== i) return null\r\n                                const dm = () => {\r\n                                    setServer()\r\n                                    setScreen(<Home onJoin={server => create(user, server)} update={update} dm={{ user: u }} user={user} />)\r\n                                }\r\n                                return (\r\n                                    <div key={u.id} className={`server nt ${!n.saved && \"nta\"}`}>\r\n                                        <img onClick={dm} width=\"50\" height=\"50\" alt=\"icon\" src={u.displayAvatarURL(80)} className=\"server-icon\" />\r\n                                        <div className=\"notification\">{notifications.filter(not => not.user._id === u.id).length}</div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                            <div className=\"border-bottom\" />\r\n                            {<Server.LoadServers index={index()} me={user} servers={servers} click={click} isHome={!server} />}\r\n                            {<Server.Add user={user} onCreate={create} view={setView} />}\r\n                        </div>\r\n                        {screen}\r\n                    </div>\r\n                </ScreenContext.Provider>\r\n            </ThemeContext.Provider>\r\n        </UserContext.Provider>\r\n    )\r\n}\r\n\r\nexport default Message","import { useState, useRef } from \"react\"\r\nimport \"./index.css\"\r\nimport Login from \"../login\"\r\nimport { link } from \"../../config.json\"\r\nimport Message from \"../message\"\r\n\r\nfunction Signup({ update }) {\r\n    const [animation, shrink] = useState(\"\")\r\n    const [error, setError] = useState(\"\")\r\n    const username = useRef()\r\n    const password = useRef()\r\n    const email = useRef()\r\n    const consfirmPassword = useRef()\r\n    const login = () => {\r\n        shrink(\"shrink-me\")\r\n        setTimeout(() => update(<Login update={update}/>), 200)\r\n    }\r\n    const createAccount = () => {\r\n        console.log(username.current.value)\r\n        fetch(`${link}createuser`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n            body: JSON.stringify({\r\n                username: username.current.value,\r\n                email: email.current.value,\r\n                password: password.current.value\r\n            })\r\n        })\r\n        .then(res => res.json())\r\n        .catch(err => {\r\n            console.log(err)\r\n            setError(\"Error\")\r\n        })\r\n        .then(async result => {\r\n            if (result.error) return setError(result.error)\r\n            const user = await fetch(`${link}user?password=${result.password}&email=${result.email}`).then(res => res.json())\r\n            sessionStorage.setItem(\"user\", JSON.stringify(user))\r\n            update(<Message user={user}/>)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className={`login signup ${animation}`}>\r\n            <h2 className=\"login-text signup-text\">Create an account</h2>\r\n            <input ref={username} className=\"login-input username\" placeholder=\"Username\"/>\r\n            <input ref={email} className=\"login-input signup-email\" placeholder=\"Email\"/>\r\n            <input ref={password} className=\"login-input signup-password\" type=\"password\" placeholder=\"Password\"/>\r\n            <input ref={consfirmPassword} className=\"login-input confirm\" placeholder=\"Confirm password\"/>\r\n            <p className=\"no-account\">Already have an account? <span onClick={login}>login</span></p>\r\n            <button onClick={createAccount} className=\"button-login sign-up\">Create an account</button>\r\n            <p className=\"error-message\">{error}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Signup","import { useRef, useState } from \"react\"\r\nimport \"./index.css\"\r\nimport Signup from \"../signup\"\r\nimport { link } from \"../../config.json\"\r\nimport Message from \"../message\"\r\n\r\nfunction Login({ update }) {\r\n    const [animation, expand] = useState(\"\")\r\n    const [error, setError] = useState(\"\")\r\n    const signUp = () => {\r\n        expand(\"expand-me\")\r\n        setTimeout(() => update(<Signup update={update} />), 200)\r\n    }\r\n    const password = useRef()\r\n    const email = useRef()\r\n\r\n    const login = (e) => {\r\n        e.preventDefault()\r\n        if (!password.current.value || !email.current.value) return\r\n        expand(\"waiting\")\r\n        fetch(`${link}user?password=${password.current.value}&email=${email.current.value}`).then(res => res.json())\r\n            .then(user => {\r\n                expand(\"expand-all\")\r\n                setTimeout(() => update(<Message user={user} update={update} />), 300)\r\n            })\r\n            .catch(err => {\r\n                expand(\"\")\r\n                setError(err.toString())\r\n            })\r\n\r\n    }\r\n\r\n    return (\r\n        <div className={`login ${animation}`}>\r\n            <h2 className=\"login-text\">Login to continue</h2>\r\n            <form name=\"login\">\r\n                <input id=\"email\" ref={email} className=\"login-input email\" required autoComplete=\"on\" type=\"email\" placeholder=\"Email\" />\r\n                <input id=\"password\" ref={password} autoComplete=\"on\" required className=\"login-input password\" type=\"password\" placeholder=\"Password\" />\r\n                <p className=\"no-account\">Don't have an account? <span onClick={signUp}>create one</span></p>\r\n                <button type=\"submit\" onClick={login} className=\"button-login sign-up\">Login</button>\r\n            </form>\r\n            <p className=\"error-message\">{error}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login","import { useState, createContext } from \"react\"\r\nimport Login from \"./login/index.jsx\"\r\nimport \"./index.css\"\r\n\r\nexport const Update = createContext()\r\n\r\nfunction App() {\r\n    const [state, setState] = useState(<Initial />)\r\n    function Initial() {\r\n        return <Login update={setState} />\r\n    }\r\n\r\n    return (\r\n        <Update.Provider value={setState}>\r\n            <div className=\"main\">\r\n                <a className=\"github-link\" href=\"https://github.com/uwu404/discord-clone-client\">view source code</a>\r\n                {state}\r\n            </div>\r\n        </Update.Provider>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from \"./app\"\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}