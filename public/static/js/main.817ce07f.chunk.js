(this["webpackJsonpreact-chat-app"]=this["webpackJsonpreact-chat-app"]||[]).push([[0],{4:function(e){e.exports=JSON.parse('{"a":"https://discordbotyes.herokuapp.com/"}')},50:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(42),i=n.n(s),r=n(2),o=(n(50),n(3)),l=n.n(o),u=n(6),d=(n(52),n(4)),j=n(5),h=n(12),m=n(13),b=(n(53),n(0));var f={Out:function(e){var t,n,a=e.click,s=e.children,i=Object(c.useRef)(null);return t=i,n=a,Object(c.useEffect)((function(){function e(e){t.current&&!t.current.contains(e.target)&&n()}return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,n]),Object(b.jsx)("div",{ref:i,children:s})},isScolled:function(e,t){t=t||document.body;var n=e.getBoundingClientRect(),c=n.top,a=n.bottom,s=n.height,i=t.getBoundingClientRect();return c<=i.top?i.top-c<=s:a-i.bottom<=s}},O=n(16),v=function(e){return Object(b.jsx)("svg",Object(O.a)(Object(O.a)({},e),{},{fill:"currentColor",width:e.size,height:e.size,version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 60.364 60.364",children:Object(b.jsx)("g",{children:Object(b.jsx)("path",{d:"M54.454,23.18l-18.609-0.002L35.844,5.91C35.845,2.646,33.198,0,29.934,0c-3.263,0-5.909,2.646-5.909,5.91v17.269\r L5.91,23.178C2.646,23.179,0,25.825,0,29.088c0.002,3.264,2.646,5.909,5.91,5.909h18.115v19.457c0,3.267,2.646,5.91,5.91,5.91\r c3.264,0,5.909-2.646,5.91-5.908V34.997h18.611c3.262,0,5.908-2.645,5.908-5.907C60.367,25.824,57.718,23.178,54.454,23.18z"})})}))},x=function(e){var t=e.view,n=e.onCreate,a=e.user,s=Object(c.useState)(""),i=Object(r.a)(s,2),o=i[0],j=i[1],h=function(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){return t(c.result)},c.onerror=function(e){return n(e)}}))},m=function(){var e="".concat(a.username,"'s server"),s=Object(c.useState)(e),i=Object(r.a)(s,2),o=i[0],m=i[1],O=Object(c.useState)(""),x=Object(r.a)(O,2),p=x[0],g=x[1],N=Object(c.useState)("bigger"),w=Object(r.a)(N,2),k=w[0],y=w[1],C=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t.target.files[0]).then((function(e){return g(e)})).catch(console.log);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){j(""),y("smaller"),setTimeout((function(){return t()}),100)},E=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.a,"servers"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:a.token},body:JSON.stringify({icon:p,name:o})}).then((function(e){return e.json()}));case 2:t=e.sent,S(),null===n||void 0===n||n(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"dark-div ".concat(k),children:Object(b.jsx)(f.Out,{click:S,children:Object(b.jsxs)("div",{className:"creator ".concat(k),children:[Object(b.jsxs)("div",{className:"view-server",children:[Object(b.jsx)(v,{onClick:S,size:25}),Object(b.jsx)("h2",{children:"Create a new Server"}),Object(b.jsx)("p",{className:"dummy-text",children:"Create a new Server, customize it! Invite your friends to it. And have a good time."}),Object(b.jsxs)("div",{className:"selector",children:[Object(b.jsx)("img",{className:"my-icon",alt:"",src:p}),Object(b.jsx)("input",{onChange:C,className:"select-icon",type:"file"})]})]}),Object(b.jsx)("label",{htmlFor:"server",children:"SERVER NAME"}),Object(b.jsx)("input",{required:!0,name:"server",defaultValue:e,onChange:function(e){return m(e.target.value)},className:"select-server-name"}),Object(b.jsxs)("div",{className:"create-server",children:[Object(b.jsx)("button",{onClick:S,className:"create-server-button cancel-creating",children:"Back"}),Object(b.jsx)("button",{onClick:E,className:"create-server-button",children:"Create"})]})]})})})};return Object(b.jsx)("div",{onClick:function(){j("add-clicked"),t(Object(b.jsx)(m,{}))},className:"add-server-border ".concat(o),children:Object(b.jsx)("div",{className:"add-server",children:Object(b.jsx)(v,{size:25})})})},p=function(){function e(t,n){Object(h.a)(this,e),this.id=t._id,this.members=t.members,this.name=t.name,this.icon=t.icon,this.channels=t.channels,this.me=n,this.invites=t.invites,this.owner=t.owner}return Object(m.a)(e,[{key:"displayIcon",value:function(e,t){return"".concat(d.a+this.icon,"?").concat(e?"width=".concat(e,"&height=").concat(t||e):"")}},{key:"toJSX",value:function(e,t){return Object(b.jsx)("div",{tooltip:this.name,className:"server ".concat(e?"click":""),children:Object(b.jsx)("img",{width:"50",height:"50",onClick:t,alt:"icon",src:this.displayIcon(50),className:"server-icon"})},this.id)}},{key:"getSearchInput",value:function(){return Object(b.jsx)("div",{className:"search-input",children:Object(b.jsx)("input",{placeholder:"search"})})}},{key:"fetchMembers",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.a,"servers/").concat(this.id,"/members"),{headers:{Authorization:this.me.token}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"LoadServers",value:function(t){var n=t.servers,c=t.click,a=t.isHome,s=t.me,i=t.index;return n.map((function(t,n){var r=new e(t,s);return r.toJSX(i===n&&!a,(function(){c(r)}))})).reverse()}}]),e}();p.Add=x;var g=p,N=(n(55),n(56),n(26)),w=n(43),k=n(44),y=(n(57),function(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){var e=new Image;e.onload=function(){return t(c.result)},e.src=c.result},c.onerror=function(e){return n(e)}}))});var C=function(e){var t=e.user,n=e.name,a=e.onClickOut,s=e.onEdit,i=e.onSave,o=Object(c.useState)(t.displayAvatarURL(150)),d=Object(r.a)(o,2),j=d[0],h=d[1],m=Object(c.useState)({password:t.password,reveal:!1}),O=Object(r.a)(m,2),v=O[0],x=O[1],p=Object(c.useState)(t.username),g=Object(r.a)(p,2),N=g[0],w=g[1],k=Object(c.useState)(t.profileColor),C=Object(r.a)(k,2),S=C[0],E=C[1],A=Object(c.useState)(!1),L=Object(r.a)(A,2),R=L[0],z=L[1],T=Object(c.useContext)(ue);Object(c.useEffect)((function(){(v.password!==t.password||N!==t.username||j!==t.displayAvatarURL(150)||S!==t.profileColor)&&v.password&&N&&j?z(!0):z(!1)}),[v.password,N,j,t,S]);var _=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,y(n).catch((function(){return 0}));case 3:(c=e.sent)&&h(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=Object(c.useState)(localStorage.getItem("theme")||"light"),I=Object(r.a)(D,2),M=I[0],U=I[1],J=function(e){return function(){T(e),localStorage.setItem("theme",e),U(e)}};return Object(b.jsx)("div",{className:"dark-div",children:Object(b.jsx)(f.Out,{click:a,children:Object(b.jsxs)("div",{className:"user-settings ".concat(n," ").concat(!R&&"is-not-edited"),children:[Object(b.jsxs)("div",{className:"user-overview",children:[Object(b.jsx)("div",{className:"avatar-div",children:Object(b.jsxs)("div",{className:"user-avatar-selector",children:[Object(b.jsx)("img",{width:"150",height:"150",src:j,alt:"avatar",className:"view-avatar"}),Object(b.jsx)("input",{accept:"image/gif,image/png,image/jpeg,image/webp",onChange:_,type:"file",className:"avatar-config"})]})}),Object(b.jsxs)("div",{className:"overview",children:[Object(b.jsx)("h2",{className:"label",children:"USERNAME"}),Object(b.jsx)("h3",{placeholder:"no username",className:"view-username",children:N}),Object(b.jsx)("h2",{className:"label",children:"EMAIL"}),Object(b.jsx)("h3",{placeholder:"no email",className:"view-email",children:t.email}),Object(b.jsx)("h2",{className:"label",children:"PASSWORD"}),Object(b.jsx)("h3",{placeholder:"no password",onClick:function(){return x((function(e){return{password:e.password,reveal:!e.reveal}}))},className:"view-password",children:v.reveal?v.password:"*".repeat(v.password.length)}),Object(b.jsx)("button",{onClick:function(){return t.update(Object(b.jsx)(fe,{update:t.update}))},className:"logout",children:"Logout"})]})]}),Object(b.jsxs)("div",{className:"user-editor",children:[Object(b.jsx)("h2",{className:"customize",children:"Customize your profile"}),Object(b.jsx)("label",{className:"generic-label",htmlFor:"username",children:"USERNAME"}),Object(b.jsx)("input",{name:"username",placeholder:"Username",onChange:function(e){return w(e.target.value)},defaultValue:t.username,maxLength:"25",type:"text"}),Object(b.jsx)("label",{className:"generic-label",htmlFor:"profile-color",children:"PROFILE COLOR"}),Object(b.jsx)("input",{onChange:function(e){return E(e.target.value)},defaultValue:t.profileColor||"#000000",name:"profile-color",className:"profile-color",type:"color"}),Object(b.jsx)("h2",{className:"customize theme-h2",children:"Theme"}),Object(b.jsxs)("div",{className:"themes",children:[Object(b.jsx)("div",{onClick:J("light"),className:"light-theme ".concat(M),children:"LIGHT"}),Object(b.jsx)("div",{onClick:J("dark"),className:"dark-theme ".concat(M),children:"DARK"})]}),Object(b.jsx)("button",{onClick:a,className:"cancel-profile",children:"Cancel"}),Object(b.jsx)("button",{onClick:function(){R&&(i(),z(!1),t.edit(N,j,S).then((function(e){return s(Object.assign(t,e))})))},className:"save-profile",children:"Save"})]})]})})})},S=function(e){var t=e.width,n=e.height;return Object(b.jsx)("svg",{fill:"currentColor",width:t,height:n,x:"0px",y:"0px",viewBox:"0 0 512 512",children:Object(b.jsx)("g",{children:Object(b.jsx)("g",{children:Object(b.jsx)("path",{d:"M495.304,205.913h-45.519c-4.73-18.267-11.996-35.493-21.382-51.291l33.961-33.961c6.487-6.492,6.516-17.095,0-23.611\r L414.95,49.633c-6.521-6.521-17.093-6.521-23.613,0l-33.959,33.961c-15.797-9.385-33.024-16.649-51.291-21.382V16.696\r C306.087,7.477,298.572,0,289.391,0h-66.783c-9.18,0-16.696,7.477-16.696,16.696v45.517c-18.265,4.73-35.493,11.992-51.291,21.379\r l-33.959-33.959c-6.521-6.521-17.093-6.521-23.613,0L49.635,97.05c-6.521,6.52-6.52,17.089,0,23.611l33.961,33.961\r c-9.385,15.799-16.651,33.024-21.382,51.291H16.696C7.515,205.913,0,213.39,0,222.609v66.783c0,9.214,7.482,16.693,16.696,16.693\r h45.519c4.73,18.267,11.996,35.493,21.382,51.291l-33.961,33.961c-6.521,6.52-6.52,17.089,0,23.611l47.415,47.417\r c6.527,6.527,17.084,6.525,23.613,0l33.959-33.959c15.797,9.387,33.026,16.647,51.291,21.379v45.519\r c0,9.214,7.482,16.696,16.696,16.696h66.783c9.157,0,16.696-7.463,16.696-16.696v-45.519c18.265-4.73,35.493-11.992,51.291-21.379\r l33.959,33.959c6.527,6.527,17.084,6.525,23.613,0l47.415-47.417c6.487-6.492,6.516-17.095,0-23.611l-33.961-33.961\r c9.385-15.799,16.651-33.024,21.382-51.291h45.519c9.214,0,16.696-7.481,16.696-16.693v-66.783\r C512,213.447,504.54,205.913,495.304,205.913z M256,339.476c-46.08-0.029-83.449-37.396-83.478-83.476\r c0.029-46.082,37.398-83.449,83.478-83.478c46.08,0.029,83.449,37.396,83.478,83.478C339.449,302.08,302.08,339.448,256,339.476z"})})})})},E=(n(58),function(){return Object(b.jsxs)("div",{className:"skeleton",children:[Object(b.jsx)("div",{className:"skeleton-pfp"}),Object(b.jsx)("div",{style:{width:Math.floor(50*Math.random())+100},className:"skeleton-username"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{style:{width:"10%"},className:"skeleton-content-1 sl"}),Object(b.jsx)("div",{style:{width:"30%"},className:"skeleton-content-2 sl"}),Object(b.jsx)("div",{style:{width:"15%"},className:"skeleton-content-3 sl"}),Object(b.jsx)("div",{style:{width:"25%"},className:"skeleton-content-4 sl"})]}),Math.random()<.3&&Object(b.jsxs)("div",{className:"random-sl",children:[Object(b.jsx)("div",{className:"skeleton-content-5 sl"}),Object(b.jsx)("div",{className:"skeleton-content-6 sl"})]}),Math.random()<.1&&Object(b.jsx)("div",{className:"skeleton-content-a"})]})});function A(){return Object(j.a)(Array(20)).map((function(e,t){return Object(b.jsx)(E,{},t)}))}var L=function(e){var t=e.users,n=e.onClick,c=e.type;return t.map((function(e){if(!e)return null;var t=new J(e);return Object(b.jsxs)("div",{className:"friend",children:[Object(b.jsx)("img",{width:"45",height:"45",alt:"uwu",src:t.displayAvatarURL(45),className:"friend-pfp"}),Object(b.jsxs)("h5",{className:"friend-name",children:[t.username,Object(b.jsx)("span",{children:t.tag})]}),Object(b.jsx)("p",{className:"state",children:"requests"===c&&e.recieved&&"Incoming friend request"}),Object(b.jsx)("p",{className:"state",children:"requests"===c&&!e.recieved&&"Ongoing friend request"}),Object(b.jsx)("p",{className:"state",children:"friends"===c&&(e.online?"Online":"Offline")}),"requests"===c&&e.recieved&&Object(b.jsx)("div",{onClick:function(){return null===n||void 0===n?void 0:n(t)},className:"accept",children:Object(b.jsx)(v,{size:15})}),"friends"===c&&Object(b.jsx)("div",{onClick:function(){return null===n||void 0===n?void 0:n(t)},className:"accept",children:"DM"})]},t.id)}))},R=function(e){var t=e.online,n=e.user,a=e.click,s=Object(c.useState)([]),i=Object(r.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){var e=!0;return fetch("".concat(d.a,"friends"),{headers:{Authorization:n.token}}).then((function(e){return e.json()})).then((function(n){e&&l(t?n.filter((function(e){return e.online})):n)})),function(){e=!1,l([])}}),[n,t]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("h5",{className:"home-title",children:[t?"ONLINE":"ALL","\u2014",o.length]}),Object(b.jsx)("div",{className:"list",children:Object(b.jsx)(L,{onClick:a,type:"friends",users:o})})]})},z=function(e){var t=e.user,n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(Object(b.jsx)("p",{className:"dumb-text-3",children:"You can add a friend by their tag. It's CaSe SeNsiTive!"})),j=Object(r.a)(o,2),h=j[0],m=j[1],f=function(){var e=Object(u.a)(l.a.mark((function e(){var n,c,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.split("#"),c=Object(r.a)(n,2),a=c[0],i=c[1],a&&i){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,fetch("".concat(d.a,"users/").concat(a,"&").concat(i,"/request"),{method:"POST",headers:{Authorization:t.token,"Content-Type":"application/json"}});case 5:if(!e.sent.ok){e.next=8;break}return e.abrupt("return",m(Object(b.jsxs)("p",{style:{color:"var(--green)"},className:"dumb-text-3",children:["You send a friend request to ",a+"#"+i]})));case 8:m(Object(b.jsxs)("p",{style:{color:"var(--red)"},className:"dumb-text-3",children:["Failed to send a friend request to ",a+"#"+i]}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"invite",children:[Object(b.jsx)("h3",{className:"h3-add",children:"ADD FRIEND"}),h,Object(b.jsxs)("div",{className:"add-friend-input",children:[Object(b.jsx)("input",{autoComplete:"off",maxLength:"35",onChange:function(e){return i(e.target.value)},placeholder:"Enter a username#0000"}),Object(b.jsx)("div",{className:"fake-after",children:!s.includes("#")&&s}),Object(b.jsx)("button",{onClick:f,className:"send-friend-request ".concat(s&&"valid"),children:"Send friend request"})]})]})},T=function(e){var t=e.user,n=Object(c.useState)([]),a=Object(r.a)(n,2),s=a[0],i=a[1];Object(c.useEffect)((function(){var e=!0;return fetch("".concat(d.a,"friends/pending"),{headers:{Authorization:t.token}}).then((function(e){return e.json()})).then((function(t){e&&i(t)})),function(){e=!1}}),[t]);return Object(b.jsxs)("div",{children:[Object(b.jsxs)("h5",{className:"home-title",children:["PENDING\u2014",s.length]}),Object(b.jsx)("div",{className:"list",children:Object(b.jsx)(L,{type:"requests",onClick:function(e){i((function(t){return Object(j.a)(t).filter((function(t){return t._id!==e.id}))})),fetch("".concat(d.a,"accept/").concat(e.id),{method:"POST",headers:{Authorization:t.token}})},users:s})})]})},_=function(e){var t=e.dm,n=e.me,a=e.setView,s=e.onJoin,i=e.setLogs,o=Object(c.useState)([]),l=Object(r.a)(o,2),u=l[0],h=l[1],m=Object(c.useState)(!1),f=Object(r.a)(m,2),O=f[0],x=f[1],p=Object(c.useCallback)((function(e){var c;if("Enter"===e.code){var a=e.target.textContent;if(0!==a.length){null===(c=e.preventDefault)||void 0===c||c.call(e);var s={author:n,content:e.target.textContent,_id:"m".concat(Date.now()+Math.random()),timestamp:Date.now(),unsent:!0,failed:!1,channel:t.user.id};h((function(e){return[].concat(Object(j.a)(e),[s])})),i((function(e){var n=Object(j.a)(e);return n.splice(0,0,n.splice(n.indexOf(n.find((function(e){return e._id===t.user._id}))),1)[0]),n})),e.target.textContent="",fetch("".concat(d.a,"dm/").concat(t.user.id),{method:"POST",headers:{Authorization:n.token,"Content-Type":"application/json"},body:JSON.stringify({content:a})}).then((function(e){return e.json()})).then((function(e){h((function(t){var n=Object(j.a)(t),c=n.find((function(e){return e._id===s._id}));return c._id=e._id,c.invite=e.invite,c.unsent=!1,n}))})).catch((function(e){console.error(e),h((function(e){var t=Object(j.a)(e);return t.find((function(e){return e._id===s._id})).failed=!0,t}))}))}}}),[n,t,i]);return Object(c.useLayoutEffect)((function(){var e=!0;return x(!0),fetch("".concat(d.a,"dm/").concat(t.user.id),{headers:{Authorization:n.token}}).then((function(e){return e.json()})).then((function(n){var c;e&&(h(n),x(!1),(null===(c=t.message)||void 0===c?void 0:c.target.textContent)&&p(t.message))})),he.on("dm",(function(n){e&&n.channel===t.user.id&&h((function(e){return[].concat(Object(j.a)(e),[n])}))})),he.on("messageDelete",(function(c){e&&(c.user!==t.user.id&&c.user!==n._id||h((function(e){return Object(j.a)(e).filter((function(e){return e._id!==c._id}))})))})),function(){e=!1,he.off("dm").off("messageDelete"),h([])}}),[n.token,n._id,t,p]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"chat",children:[O&&Object(b.jsx)(A,{}),Object(b.jsx)(G.Map,{onJoin:s,setView:a,setMessages:h,messages:u,me:n}),Object(b.jsxs)("div",{className:"dm-start",children:[Object(b.jsx)("img",{height:"85",width:"85",className:"dm-avatar",alt:"icon",src:t.user.displayAvatarURL(90)}),Object(b.jsx)("h3",{className:"dm-username",children:t.user.username}),Object(b.jsxs)("p",{className:"dumb-text-2",children:["This is the beginning of your direct message history with ",Object(b.jsx)("span",{children:t.user.username})]})]})]}),Object(b.jsxs)("div",{className:"controll",children:[Object(b.jsx)("div",{style:{pointerEvents:O?"none":"all"},onKeyDown:p,placeholder:"Send a message to ".concat(t.user.username),contentEditable:-1!==navigator.userAgent.indexOf("Firefox")?"true":"plaintext-only",className:"not-input"}),Object(b.jsxs)("div",{className:"attach-file",children:[Object(b.jsx)("input",{type:"file"}),Object(b.jsx)(v,{size:12})]})]})]})},D=function(e){var t=e.user,n=e.update,a=e.dm,s=e.onJoin,i=Object(c.useState)(),o=Object(r.a)(i,2),l=o[0],u=o[1],h=new J(Object.assign(t,{view:u,update:n})),m=Object(c.useState)("online"),f=Object(r.a)(m,2),O=f[0],v=f[1],x=Object(c.useState)(a),p=Object(r.a)(x,2),g=p[0],N=p[1],w=Object(c.useState)([]),k=Object(r.a)(w,2),y=k[0],C=k[1],S=function(e){return N({user:e})},E=Object(c.useState)(Object(b.jsx)(R,{click:S,online:!0,user:t})),A=Object(r.a)(E,2),L=A[0],D=A[1];Object(c.useEffect)((function(){a&&N(a)}),[a]);var I=Object(c.useContext)(de),M=Object(r.a)(I.not,2),U=M[0],F=M[1];Object(c.useLayoutEffect)((function(){(null===g||void 0===g?void 0:g.user.id)&&(U.find((function(e){return e.user._id===g.user.id}))&&F((function(e){return Object(j.a)(e).filter((function(e){return e.user._id!==g.user.id}))})),fetch("".concat(d.a,"notifications?id=").concat(g.user.id),{method:"DELETE",headers:{Authorization:t.token}}).catch(console.log))}),[U,F,null===g||void 0===g?void 0:g.user.id,t.token]),Object(c.useEffect)((function(){var e=!0;return fetch("".concat(d.a,"dms/logs"),{headers:{Authorization:t.token}}).then((function(e){return e.json()})).then((function(t){e&&C(t)})),he.on("online",(function(e){C((function(t){var n=Object(j.a)(t),c=n.find((function(t){return t._id===e.user}));return c?(c.online=e.online,n):n}))})),function(){e=!1,he.off("online")}}),[t]),Object(c.useEffect)((function(){g&&(D(Object(b.jsx)(_,{setLogs:C,onJoin:s,dm:g,me:t,setView:u})),v(g.user.id),y.some((function(e){return e._id===g.user.id}))||C((function(e){return[g.user].concat(Object(j.a)(e))})))}),[g,t,s,y]);var V=function(e){return function(){v(e),"online"===e&&D(Object(b.jsx)(R,{click:S,online:!0,user:t})),"add"===e&&D(Object(b.jsx)(z,{user:t})),"pending"===e&&D(Object(b.jsx)(T,{user:t})),"all"===e&&D(Object(b.jsx)(R,{click:S,user:t}))}};return Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"messages",children:[Object(b.jsx)("div",{className:"name name-".concat(O),children:g?Object(b.jsxs)("div",{children:[Object(b.jsx)("img",{className:"who-am-i-talking-to",height:"20",width:"20",alt:"pfp",src:g.user.displayAvatarURL(80)}),Object(b.jsx)("div",{style:{marginLeft:24},className:"channel-title",children:Object(b.jsx)("span",{children:g.user.username})})]}):Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:V("online"),className:"online",children:"Online"}),Object(b.jsx)("button",{onClick:V("all"),className:"all",children:"All"}),Object(b.jsx)("button",{onClick:V("pending"),className:"pending",children:"Pending"}),Object(b.jsx)("button",{onClick:V("add"),className:"add-friend",children:"Add friend"})]})}),Object(b.jsx)("div",{className:"server-name"}),Object(b.jsxs)("div",{className:"channels",children:[Object(b.jsx)("div",{onClick:function(){v("online"),N(),D(Object(b.jsx)(R,{click:S,online:!0,user:t}))},className:"friends-click ".concat(!g&&"friends-clicked"),children:"Friends"}),Object(b.jsx)("h4",{className:"direct-messages",children:"DIRECT MESSAGES"}),y.map((function(e){var t=new J(e);return Object(b.jsxs)("div",{onClick:function(){return N({user:t})},style:{opacity:1},className:"member ".concat((null===g||void 0===g?void 0:g.user.id)===t.id&&"member-clicked"," ").concat(!t.online&&"member-offline"),children:[Object(b.jsxs)("div",{className:"member-avatar",children:[Object(b.jsx)("img",{width:"38",height:"38",src:t.displayAvatarURL(90),alt:"avatar",className:"member-icon"}),Object(b.jsx)("div",{className:"member-is-online"})]}),Object(b.jsxs)("div",{className:"nice-div",children:[Object(b.jsx)("h4",{className:"member-name",children:t.username}),Object(b.jsx)("p",{className:"is-online",children:t.online?"Online":"Offline"})]})]},t.id)}))]}),Object(b.jsx)("div",{className:"wrapper",children:L})]}),Object(b.jsx)("div",{children:h.toIcon()}),l]})},I=function(e){var t=e.size;return Object(b.jsxs)("svg",{height:t,width:t,version:"1.1",id:"crown",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",children:[Object(b.jsx)("circle",{style:{fill:"#F95FF2"},cx:"50.637",cy:"264.44",r:"50.637"}),Object(b.jsx)("circle",{style:{fill:"#AB15A4"},cx:"461.363",cy:"264.44",r:"50.637"}),Object(b.jsx)("polygon",{style:{fill:"#E7C05C"},points:"405.099,416.352 461.363,393.846 495.121,50.637 458.844,76.244 "}),Object(b.jsx)("polygon",{style:{fill:"#FFD875"},points:"375.557,135.033 255.993,50.637 136.434,135.033 16.879,50.637 50.637,416.352 \r 425.391,416.352 458.844,76.244 "}),Object(b.jsx)("circle",{style:{fill:"#D0A842"},cx:256,cy:"264.44",r:"84.396"}),Object(b.jsx)("path",{style:{fill:"#FEDFFD"},d:"M461.363,393.846h-33.758v67.517h33.758c18.645,0,33.758-15.114,33.758-33.758\r C495.121,408.96,480.007,393.846,461.363,393.846z"}),Object(b.jsx)("path",{style:{fill:"#FFF3EE"},d:"M461.363,427.604c0-18.645-15.114-33.758-33.758-33.758H50.637\r c-18.645,0-33.758,15.114-33.758,33.758c0,18.645,15.114,33.758,33.758,33.758h376.967\r C446.249,461.363,461.363,446.249,461.363,427.604z"}),Object(b.jsx)("path",{style:{fill:"#AB15A4"},d:"M256,213.802v101.275c27.966,0,50.637-22.671,50.637-50.637S283.966,213.802,256,213.802z"}),Object(b.jsx)("path",{style:{fill:"#D23ACB"},d:"M272.879,264.44c0-27.966-7.557-50.637-16.879-50.637c-27.966,0-50.637,22.671-50.637,50.637\r s22.671,50.637,50.637,50.637C265.322,315.077,272.879,292.406,272.879,264.44z"}),Object(b.jsxs)("g",{children:[Object(b.jsx)("circle",{style:{fill:"#E7C05C"},cx:"89.673",cy:"317.89",r:"8.44"}),Object(b.jsx)("circle",{style:{fill:"#E7C05C"},cx:"123.431",cy:"351.648",r:"8.44"})]})]})},M=function(e){var t=e.server,n=e.me,a=e.member,s=Object(c.useState)(!1),i=Object(r.a)(s,2),o=i[0],l=i[1];return Object(b.jsxs)("div",{onClick:function(e){l(!0);var c=e.target.getBoundingClientRect().top-40;a.view(Object(b.jsx)(f.Out,{click:function(){l(!1),a.view()},children:a.toJSX({right:255,top:c,animationName:"reverseShift"},t,n)}))},className:"member ".concat(o&&"member-clicked"," ").concat(!a.online&&"member-offline"),children:[Object(b.jsxs)("div",{className:"member-avatar",children:[Object(b.jsx)("img",{width:"38",height:"38",src:a.displayAvatarURL(90),alt:"avatar",className:"member-icon"}),Object(b.jsx)("div",{className:"member-is-online"})]}),Object(b.jsxs)("div",{className:"nice-div",children:[Object(b.jsxs)("h4",{className:"member-name ".concat((null===t||void 0===t?void 0:t.owner)===a.id&&"owner"),children:[a.username," ",(null===t||void 0===t?void 0:t.owner)===a.id&&Object(b.jsx)(I,{size:16})]}),Object(b.jsx)("p",{className:"is-online",children:a.online?"Online":"Offline"})]})]},a.id)},U=function(){function e(t){Object(h.a)(this,e),this.username=t.username,this.avatarURL=t.avatarURL,this.id=t._id,this._id=t._id,this.token=t.token,this.tag=t.tag,this.view=t.view,this.profileColor=t.profileColor,this.servers=t.servers,this.update=t.update,this.password=t.password,this.email=t.email,this.online=t.online}return Object(m.a)(e,[{key:"displayAvatarURL",value:function(e){return"".concat(d.a+this.avatarURL,"?").concat(e?"width=".concat(e,"&height=").concat(e):"")}},{key:"toIcon",value:function(){return function(e){var t=Object(c.useContext)(de).setUser,n=new U(e),a=function(e){t(e),i()},s=function(){e.view(Object(b.jsx)(C,{onEdit:a,user:n,name:"bigger waiting",onClickOut:r}))},i=function(){return e.view(Object(b.jsx)(C,{onEdit:a,user:n,name:"bigger",onClickOut:r,onSave:s}))},r=function t(){e.view(Object(b.jsx)(C,{onEdit:a,user:n,name:"smaller",onClickOut:t})),setTimeout((function(){return e.view()}),100)};return Object(b.jsxs)("footer",{className:"footer",children:[Object(b.jsx)("img",{className:"my-pfp",src:n.displayAvatarURL(80),alt:"icon"}),Object(b.jsxs)("h5",{className:"my-username",children:[n.username,Object(b.jsx)("span",{children:n.tag})]}),Object(b.jsx)("div",{onClick:i,className:"settings-button",children:Object(b.jsx)(S,{width:20,height:20})})]})}(this)}},{key:"toJSX",value:function(e,t,n){var a=this,s=function(){var s=Object(c.useContext)(de),i=s.setScreen,o=s.setServer,l=Object(c.useContext)(Oe),u=Object(c.useState)(a.online),d=Object(r.a)(u,2),j=d[0],h=d[1],m=Object(c.useState)(e.top),f=Object(r.a)(m,2),v=f[0],x=f[1],p=Object(c.useRef)();Object(c.useLayoutEffect)((function(){var t=!0;he.on("online",(function(e){t&&a.id===e&&h(!0)})),he.on("offline",(function(e){t&&a.id===e&&h(!1)}));var n=p.current.getBoundingClientRect();return e.top>window.innerHeight-n.height-20&&x(window.innerHeight-n.height-20),function(){t=!1}}),[]);return Object(b.jsxs)("div",{ref:p,style:Object(O.a)(Object(O.a)({},e),{},{top:v,"--profile":a.profileColor||"#000"}),className:"user-div ".concat(!j&&"not-online"),children:[Object(b.jsxs)("div",{className:"avatar-wrapper",children:[Object(b.jsx)("img",{width:"88",height:"88",src:a.displayAvatarURL(90),alt:"avatar",className:"user-avatar"}),Object(b.jsx)("div",{className:"status"})]}),Object(b.jsxs)("h5",{className:"user-username",children:[a.username,Object(b.jsx)("span",{children:a.tag})]}),Object(b.jsx)("div",{className:"line first"}),t&&Object(b.jsxs)("div",{className:"roles",children:[Object(b.jsx)("h5",{children:"ROLES"}),Object(b.jsx)("div",{className:"role",children:"Member"}),t.owner===a.id&&Object(b.jsx)("div",{className:"role",children:"Owner"}),Object(b.jsx)("div",{className:"line last"})]}),Object(b.jsxs)("div",{className:"note",children:[Object(b.jsx)("h5",{children:"NOTE"}),Object(b.jsx)("textarea",{onChange:function(e){return localStorage.setItem(a.id,e.target.value)},defaultValue:localStorage.getItem(a.id),placeholder:"Click to add a note"})]}),n._id!==a.id&&Object(b.jsx)("input",{onKeyDown:function(e){if("Enter"===e.code){o();var t={code:"Enter",target:{textContent:e.target.value}};i(Object(b.jsx)(D,{update:l,dm:{user:a,message:t},user:n}))}},placeholder:"Message ".concat(a.username).concat(a.tag),className:"dm-user"})]})};return Object(b.jsx)(s,{})}},{key:"fetch",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(d.a,"fetch/").concat(this.id)).then((function(e){return e.json()}));case 2:return n=t.sent,this.avatarURL=n.avatarURL,this.username=n.username,t.abrupt("return",new e(Object.assign({_id:this.id},n)));case 6:case"end":return t.stop()}}),t,this)}))))},{key:"edit",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n,c){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.a,"user/edit"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:this.token},body:JSON.stringify({username:t,data:n,profileColor:c})}).then((function(e){return e.json()})).catch(console.log);case 2:return a=e.sent,this.avatarURL=a.avatarURL,this.username=a.username,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,c){return e.apply(this,arguments)}}()}],[{key:"MapMembers",value:function(t){var n,c=t.members,a=t.server,s=t.setView,i=t.me,r=c.filter((function(e){return null===e||void 0===e?void 0:e.online})).length,o=c.length-r,l=[Object(b.jsxs)("h5",{className:"members-title",children:["ONLINE \u2014 ",r]},"online")],u=[Object(b.jsxs)("h5",{className:"members-title",children:["OFFLINE \u2014 ",o]},"offline")],d=c.sort((function(e,t){return e.username.localeCompare(t.username)})),j=Object(k.a)(d);try{for(j.s();!(n=j.n()).done;){var h=n.value,m=new e(Object.assign(h,{view:s})),f=Object(b.jsx)(M,{member:m,server:a,me:i},m.id);h.online?l.push(f):u.push(f)}}catch(O){j.e(O)}finally{j.f()}return 1===u.length&&(u.length=0),1===l.length&&(l.length=0),l.concat(u)}}]),e}(),J=U;n(59);var F=function(e){var t=e.size;return Object(b.jsxs)("svg",{style:{transform:"rotate(90deg)"},width:t,height:t,viewBox:"0 0 24 24",children:[Object(b.jsx)("rect",{id:"view-box",width:"24",height:"24",fill:"currentColor",opacity:"0"}),Object(b.jsx)("path",{id:"Shape",d:"M12,1.5A1.5,1.5,0,1,1,13.5,3,1.5,1.5,0,0,1,12,1.5Zm-6,0A1.5,1.5,0,1,1,7.5,3,1.5,1.5,0,0,1,6,1.5Zm-6,0A1.5,1.5,0,1,1,1.5,3,1.5,1.5,0,0,1,0,1.5Z",transform:"translate(4.5 11)",fill:"currentColor"})]})},V=function(e){var t=e.name,n=e.message,c=e.onCancel;return Object(b.jsx)("div",{className:"dark-div ".concat(t),children:Object(b.jsx)(f.Out,{click:c,children:Object(b.jsxs)("div",{className:"dlt ".concat(t),children:[Object(b.jsx)("h2",{className:"some-text",children:"Delete message"}),Object(b.jsx)("h4",{className:"dumb-question",children:"Are you sure you want to delete this message?"}),Object(b.jsx)("div",{className:"preview-message",children:n.toJSX()}),Object(b.jsxs)("div",{className:"create-server",children:[Object(b.jsx)("button",{style:{color:"var(--font-primary)"},onClick:c,className:"create-server-button cancel-creating",children:"Cancel"}),Object(b.jsx)("button",{className:"create-server-button delete-message",onClick:function(){n.delete(),c()},children:"Delete"})]})]})})})},P=function(e){var t=e.invite,n=e.code,a=e.onJoin,s=e.me,i=new g(t),o=s.servers.find((function(e){return e._id===i.id}))?"Joined":"Join",l=Object(c.useState)(o),u=Object(r.a)(l,2),j=u[0],h=u[1];return Object(b.jsxs)("div",{className:"message-invite",children:[Object(b.jsx)("img",{width:"40",height:"40",className:"server-invite-icon",src:i.displayIcon(57),alt:"icon"}),Object(b.jsxs)("div",{className:"name-and-members",children:[Object(b.jsx)("h4",{className:"server-invite-name",children:i.name}),Object(b.jsxs)("div",{className:"member-count",children:[t.members.length," member",1!==t.members.length&&"s"]})]}),Object(b.jsx)("button",{onClick:function(){h("..."),"Joined"!==o&&"..."!==j&&fetch("".concat(d.a,"servers/").concat(n),{method:"POST",headers:{Authorization:s.token}}).then((function(e){return e.json()})).then((function(e){h("Joined"),a(e)}))},className:"server-invite-join",children:j})]})},q=function(e){var t=e.message,n=function(e){var n=e.name;return Object(b.jsx)("div",{style:{pointerEvents:"all"},className:"darken ".concat(!n&&"slide"),children:Object(b.jsx)(f.Out,{click:a,children:Object(b.jsx)("img",{className:"view-attachment ".concat(n),src:d.a+t.attachment.URL,alt:"attachment"})})})},a=function(){t.setView(Object(b.jsx)(n,{name:"smaller"})),setTimeout((function(){return t.setView()}),100)},s=Object(c.useState)(Object(b.jsxs)("div",{className:"rotating",children:[Object(b.jsx)("div",{className:"rotating-div-1"}),Object(b.jsx)("div",{className:"rotating-div-2"})]})),i=Object(r.a)(s,2),o=i[0],l=i[1];return Object(b.jsxs)("div",{className:"image-div",children:[o,Object(b.jsx)("img",{onLoad:function(){return l()},loading:"lazy",width:t.calculateImage.width,height:t.calculateImage.height,src:t.displayAttachmentURL,className:"message-attachment",alt:"attachment",onClick:function(){t.setView(Object(b.jsx)(n,{name:"bigger"})),setTimeout((function(){return t.setView(Object(b.jsx)(n,{}))}),100)}})]})},B=function(e){var t=e.style,n=e.message,a=e.clickOut,s=Object(c.useContext)(je),i=function e(){n.setView(Object(b.jsx)(V,{onCancel:e,name:"smaller",message:n})),setTimeout((function(){return n.setView()}),100)};return Object(b.jsx)(f.Out,{click:a,children:Object(b.jsxs)("div",{style:t,className:"message-menu",children:[s._id===n.author.id&&Object(b.jsx)("p",{className:"editor option",children:"Edit"}),Object(b.jsx)("p",{onClick:function(){return n.setView(Object(b.jsx)(V,{onCancel:i,name:"bigger",message:n}))},className:"deletor option",children:"Delete"})]})})},H=Object(w.a)("inviteCode");function X(){return this.content.match(/(^|\s)server\/.{7}(?=\s|$)/g)[0].split("/")[1]}var G=function(){function e(t,n,c,a){Object(h.a)(this,e),Object.defineProperty(this,H,{get:X,set:void 0}),this.author=new J(t.author),this.content=t.content,this.attachment=t.attachment,this.timestamp=new Date(t.timestamp),this.id=t._id,this.invite=t.invite,this.unsent=t.unsent,this.server=a,this.channel=t.channel,this.Authorization=null===n||void 0===n?void 0:n.token,this.me=n,this.setMessages=t.setMessages,this.onJoin=c,this.failed=t.failed}return Object(m.a)(e,[{key:"getView",value:function(e){this.setView=e}},{key:"toJSX",value:function(){var e,t,n=this,c=function(){var e=Object(u.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target.getBoundingClientRect(),n.setView(Object(b.jsx)(f.Out,{click:function(){return n.setView()},children:n.author.toJSX({left:c.left+c.width+7<window.innerWidth-275?c.left+c.width+7:window.innerWidth-275,top:c.top-60},n.server,n.me)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"message-div ".concat(this.unsent?"unsent":""),style:{marginTop:"15px"},children:[Object(b.jsx)("img",{onClick:c,width:"40",height:"40",className:"author-icon",src:this.author.displayAvatarURL(90),alt:"avatar"}),Object(b.jsxs)("div",{className:"message-content",children:[Object(b.jsxs)("p",{className:"author-name",children:[Object(b.jsx)("span",{onClick:c,className:"exact-author",children:this.author.username}),Object(b.jsx)("span",{className:"exact-time",children:this.createdAt})]}),Object(b.jsx)("p",{className:"text ".concat((this.unsent?"unsent-message ":" ")+(this.failed?"failed-tosend":"")),children:this.content}),(null===(e=this.attachment)||void 0===e?void 0:e.URL)&&this.Attachment,(null===(t=this.invite)||void 0===t?void 0:t._id)&&Object(b.jsx)(P,{me:this.me,onJoin:function(e){return n.onJoin(e)},invite:this.invite,code:Object(N.a)(this,H)[H]})]}),Object(b.jsx)("div",{onClick:function(e){var t=e.target.getBoundingClientRect(),c={top:t.top,left:t.left,zIndex:4};n.setView(Object(b.jsx)(B,{clickOut:function(){return n.setView()},style:c,message:n}))},tabIndex:"0",className:"message-params",children:Object(b.jsx)(F,{size:22})})]},this.id)}},{key:"calculateImage",get:function(){return this.attachment.height<300&&this.attachment.width<400?{height:this.attachment.height,width:this.attachment.width}:this.attachment.height>=this.attachment.width||this.attachment.height/this.attachment.width*400>300?{height:300,width:this.attachment.width/this.attachment.height*300}:{width:400,height:this.attachment.height/this.attachment.width*400}}},{key:"createdAt",get:function(){var e=this.timestamp,t=new Date(Date.now()),n="".concat("".concat(e.getHours()).padStart(2,"0"),":").concat("".concat(e.getMinutes()).padStart(2,"0"));return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()?e.getDay()===t.getDay()?"Today at ".concat(n):t.getDay()-e.getDay()===1?"Yesterday at ".concat(n):e.toLocaleDateString():e.toLocaleDateString()}},{key:"toJSXMin",value:function(){var e,t,n=this;return Object(b.jsxs)("div",{style:{paddingTop:"4px",paddingBottom:"4px"},className:"message-div min",children:[Object(b.jsxs)("p",{className:"createdAt",children:["".concat(this.timestamp.getHours()).padStart(2,"0"),":","".concat(this.timestamp.getMinutes()).padStart(2,"0")]}),Object(b.jsx)("p",{className:"min-text ".concat((this.unsent?"unsent-message ":" ")+(this.failed?"failed-tosend":"")),children:this.content}),(null===(e=this.attachment)||void 0===e?void 0:e.URL)&&this.Attachment,(null===(t=this.invite)||void 0===t?void 0:t._id)&&Object(b.jsx)(P,{me:this.me,onJoin:function(e){return n.onJoin(e)},invite:this.invite,code:Object(N.a)(this,H)[H]}),Object(b.jsx)("div",{onClick:function(e){var t=e.target.getBoundingClientRect(),c={top:t.top,left:t.left,zIndex:4};n.setView(Object(b.jsx)(B,{clickOut:function(){return n.setView()},style:c,message:n}))},tabIndex:"0",className:"message-params",children:Object(b.jsx)(F,{size:22})})]},this.id)}},{key:"Attachment",get:function(){return Object(b.jsx)(q,{message:this})}},{key:"displayAttachmentURL",get:function(){var e=this.calculateImage.height!==this.attachment.height&&this.calculateImage.width!==this.attachment.width?"?width=".concat(Math.trunc(this.calculateImage.width),"&height=").concat(Math.trunc(this.calculateImage.height)):"";return d.a+this.attachment.URL+e}},{key:"delete",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.a,"channels/").concat(this.channel,"/messages/").concat(this.id),{method:"DELETE",headers:{Authorization:this.Authorization}}).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"Map",value:function(t){var n=t.messages,c=t.setView,a=t.setMessages,s=t.me,i=t.onJoin,r=t.server;return n.map((function(t,o){var l,u,d=new e(Object.assign(t,{setMessages:a}),s,i,r);return d.getView(c),d.author.id===(null===(l=n[o-1])||void 0===l?void 0:l.author._id)&&d.timestamp-(null===(u=n[o-1])||void 0===u?void 0:u.timestamp)<6e5?d.toJSXMin():d.toJSX()})).reverse()}}]),e}(),Y=function(e){var t=e.size;return Object(b.jsx)("svg",{height:t,viewBox:"0 0 24 24",width:t,children:Object(b.jsx)("path",{d:"M11.03 8h3.94l1.06-4.24a1 1 0 1 1 1.94.48L17.03 8H20a1 1 0 0 1 0 2h-3.47l-1 4H18a1 1 0 1 1 0 2h-2.97l-1.06 4.25a1 1 0 1 1-1.94-.49l.94-3.76H9.03l-1.06 4.25a1 1 0 1 1-1.94-.49L6.97 16H4a1 1 0 0 1 0-2h3.47l1-4H6a1 1 0 0 1 0-2h2.97l1.06-4.24a1 1 0 1 1 1.94.48L11.03 8zm-.5 2l-1 4h3.94l1-4h-3.94z"})})},K=function(e,t,n){var a=Object(c.useState)(0),s=Object(r.a)(a,2),i=s[0],o=s[1];return Object(c.useEffect)((function(){return o(0)}),[e]),e.map((function(e,c){var a=new W(e,t);return a.toJSX(i===c,(function(){n(a),o(c)}))}))},W=function(){function e(t,n){Object(h.a)(this,e),this.name=t.name,this.id=t._id,this.server=n}return Object(m.a)(e,[{key:"toJSX",value:function(e,t){return Object(b.jsxs)("div",{onClick:t,className:"channel ".concat(e?"c-clicked":""),children:[Object(b.jsx)(Y,{size:25}),Object(b.jsx)("span",{children:this.name})]},this.id)}},{key:"toTitle",value:function(){return Object(b.jsxs)("div",{className:"channel-title",children:[Object(b.jsx)(Y,{size:30}),Object(b.jsx)("span",{children:this.name})]})}},{key:"join",value:function(e,t){e.emit("join",{channel:this.id,Authorization:t})}},{key:"fetchMessages",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.a,"channels/").concat(this.id,"/messages"),{headers:{Authorization:t}}).then((function(e){return e.json()})).catch((function(){return[]}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d.a,"channels/").concat(this.id,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:t.author.token},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",new G(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();W.LoadChannels=K;var Z=W,$=function(e){var t=e.src,n=e.onCancel,a=e.onSend,s=e.animation,i=e.channel,o=e.name,l=Object(c.useState)(),u=Object(r.a)(l,2),d=u[0],j=u[1];return Object(b.jsx)("div",{className:"dark-div ".concat(s),children:Object(b.jsx)(f.Out,{click:n,children:Object(b.jsxs)("div",{className:"image-preview ".concat(s),children:[Object(b.jsx)("img",{className:"image-preview-img",src:t,alt:"base64 preview"}),Object(b.jsx)("p",{className:"file-name",children:o||"image"}),Object(b.jsxs)("p",{className:"to-channel",children:["Upload to ",null===i||void 0===i?void 0:i.name]}),Object(b.jsx)("label",{htmlFor:"comment",className:"add-comment",children:"Add a comment"}),Object(b.jsx)("input",{name:"comment",onChange:function(e){return j(e.target.value)}}),Object(b.jsxs)("div",{className:"create-server",children:[Object(b.jsx)("button",{style:{color:"var(--font-primary)"},onClick:n,className:"create-server-button cancel-creating",children:"Cancel"}),Object(b.jsx)("button",{onClick:function(){return a(d)},className:"create-server-button send-attachment",children:"Send"})]})]})})})},Q=function(){return Object(b.jsxs)("div",{className:"member-skeleton",children:[Object(b.jsx)("div",{className:"member-skeleton-pfp"}),Object(b.jsxs)("div",{className:"nice-div",children:[Object(b.jsx)("div",{className:"member-skeleton-name"}),Math.random()>.5&&Object(b.jsx)("div",{className:"member-skeleton-status"})]})]})};function ee(e){var t=e.times;return Object(j.a)(Array(t)).map((function(e,t){return Object(b.jsx)(Q,{},t)}))}var te=function(e){var t=e.size;return Object(b.jsx)("svg",{width:t,height:t,viewBox:"0 0 48 48",fill:"none",children:Object(b.jsx)("path",{d:"M37 18L25 30L13 18",stroke:"var(--font-primary)",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"})})},ne=(n(60),function(e){var t=e.server,n=e.quit,a=e.animation,s=Object(c.useState)(),i=Object(r.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)([]),h=Object(r.a)(u,2),m=h[0],f=h[1],O=Object(c.useState)(""),x=Object(r.a)(O,2),p=x[0],g=x[1],N=Object(c.useContext)(je);Object(c.useEffect)((function(){var e=!0;return fetch("".concat(d.a,"friends"),{headers:{Authorization:N.token}}).then((function(e){return e.json()})).then((function(t){e&&l(t)})),function(){e=!1}}),[N]);return Object(b.jsxs)("div",{className:"invite-people-div ".concat(a),children:[Object(b.jsxs)("div",{className:"part-1",children:[Object(b.jsxs)("h3",{children:["INVITE PEOPLE TO ",t.name.toUpperCase()]}),Object(b.jsx)("input",{onChange:function(e){return g(e.target.value)},placeholder:"Search for friends"}),Object(b.jsx)(v,{onClick:n,size:25})]}),Object(b.jsxs)("div",{className:"part-2",children:[!o&&Object(b.jsx)("p",{className:"searching",children:"SEARCHING FOR FRIENDS"}),o&&!o.some((function(e){return e.username.toLowerCase().includes(p.toLowerCase())}))&&Object(b.jsx)("p",{className:"searching",children:"NO RESULTS WERE FOUND"}),o&&o.map((function(e){var n=new J(e);return p&&!n.username.toLowerCase().includes(p.toLowerCase())?null:Object(b.jsxs)("div",{className:"invite-friend",children:[Object(b.jsx)("img",{alt:n.id,width:"34",height:"34",src:n.displayAvatarURL(80)}),Object(b.jsx)("h5",{children:n.username}),Object(b.jsx)("button",{className:"".concat(m.includes(n.id)&&"invited"),onClick:function(){fetch("".concat(d.a,"dm/").concat(n.id),{method:"POST",headers:{Authorization:N.token,"Content-Type":"application/json"},body:JSON.stringify({content:"server/"+t.invites[0]})}).catch(console.error),f((function(e){return[].concat(Object(j.a)(e),[n.id])}))},children:m.includes(n.id)?"Sent":"Invite"})]},n.id)}))]}),Object(b.jsxs)("div",{className:"part-3",children:[Object(b.jsx)("h4",{children:"OR, SEND A SERVER INVITE LINK TO A FRIEND"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:function(){return navigator.clipboard.writeText("server/"+t.invites[0])},children:"Copy"}),Object(b.jsx)("input",{readOnly:!0,value:"server/"+t.invites[0]})]})]})]})}),ce=function(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){var e=new Image;e.onload=function(){return t(c.result)},e.src=c.result},c.onerror=function(e){return n(e)}}))},ae=function(e){var t=e.server,n=e.animation,a=e.quit,s=Object(c.useState)(t.displayIcon(100,100)),i=Object(r.a)(s,2),o=i[0],j=i[1],h=Object(c.useState)(""),m=Object(r.a)(h,2),O=m[0],v=m[1],x=Object(c.useContext)(je),p=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,ce(n).catch((function(){return 0}));case 3:(c=e.sent)&&j(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"dark-div ".concat(n),children:Object(b.jsx)(f.Out,{click:a,children:Object(b.jsxs)("div",{className:"edit-server ".concat(n),children:[Object(b.jsxs)("div",{className:"server-edit-icon",children:[Object(b.jsx)("img",{height:"100",width:"100",src:o,alt:"icon"}),Object(b.jsx)("label",{className:"upload-button",htmlFor:"xx3",children:"Upload Image"}),Object(b.jsx)("input",{id:"xx3",name:"upload",className:"upload-file",onChange:p,type:"file"})]}),Object(b.jsxs)("div",{className:"server-info",children:[Object(b.jsx)("h3",{children:"Edit Server"}),Object(b.jsx)("label",{htmlFor:"bruh",children:"SERVER NAME"}),Object(b.jsx)("input",{className:"change-server-name",onChange:function(e){return v(e.target.value)},name:"bruh",defaultValue:t.name}),Object(b.jsx)("button",{onClick:function(){fetch("".concat(d.a,"server/").concat(t.id),{method:"PATCH",body:JSON.stringify({icon:o,name:O}),headers:{"Content-Type":"application/json",Authorization:x.token}})},children:"Save"})]})]})})})},se=function(e){var t=e.server,n=e.quit,a=e.animation,s=Object(c.useContext)(je),i=Object(c.useState)({name:"",type:"text"}),o=Object(r.a)(i,2),j=o[0],h=o[1],m=Object(c.useState)(""),O=Object(r.a)(m,2),x=O[0],p=O[1],g=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.name){e.next=2;break}return e.abrupt("return");case 2:return p("waiting"),e.next=5,fetch("".concat(d.a,"servers/").concat(t.id,"/channels"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:s.token},body:JSON.stringify(j)});case 5:n();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"dark-div ".concat(a),children:Object(b.jsx)(f.Out,{click:n,children:Object(b.jsxs)("div",{className:"invite-people-div ".concat(a," ").concat(x),children:[Object(b.jsxs)("div",{style:{textAlign:"center"},className:"part-1",children:[Object(b.jsx)("h3",{style:{fontSize:"20px",marginTop:30},children:"Create Text Channel"}),Object(b.jsx)(v,{onClick:n,size:25})]}),Object(b.jsxs)("div",{className:"check-boxes",children:[Object(b.jsx)("h5",{children:"CHANNEL TYPE"}),Object(b.jsxs)("div",{className:"check",children:[Object(b.jsx)("div",{className:"checker"}),Object(b.jsx)(Y,{size:28}),Object(b.jsxs)("div",{className:"channel-type",children:[Object(b.jsx)("h4",{children:"Text Channel"}),Object(b.jsx)("p",{children:"Post images, GIFs, opinions and puns"})]})]}),Object(b.jsx)("h5",{children:"CHANNEL NAME"}),Object(b.jsx)("input",{onChange:function(e){return h((function(t){return{name:e.target.value,type:t.type}}))},style:{marginTop:0,height:35},className:"change-server-name"})]}),Object(b.jsxs)("div",{className:"create-server",children:[Object(b.jsx)("button",{onClick:n,style:{color:"var(--font-primary)"},className:"create-server-button cancel-creating",children:"Cancel"}),Object(b.jsx)("button",{onClick:g,className:"create-server-button create-channel ".concat(!j.name&&"cant-click"),children:"Create Channel"})]})]})})})},ie=function(e){return new Promise((function(t,n){var c=new FileReader;c.readAsDataURL(e),c.onload=function(){var e=new Image;e.onload=function(){return t(c.result)},e.src=c.result},c.onerror=function(e){return n(e)}}))},re=function(e){var t=e.user,n=e.server,a=e.update,s=e.onJoin,i=Object(c.useState)(),o=Object(r.a)(i,2),h=o[0],m=o[1],O=new J(Object.assign(t,{view:m,update:a})),x=Object(c.useState)(),p=Object(r.a)(x,2),g=p[0],N=p[1],w=Object(c.useState)(),k=Object(r.a)(w,2),y=k[0],C=k[1],S=Object(c.useState)([]),E=Object(r.a)(S,2),L=E[0],R=E[1],z=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.id!==t.id&&N(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useLayoutEffect)((function(){var e=!0;C();var t=new Z(n.channels[0],n);return N(t),R([]),n.fetchMembers("no-cache").then((function(t){e&&R(t)})),he.on("online",(function(t){e&&R((function(e){var n=Object(j.a)(e),c=n.find((function(e){return e._id===t.user}));return c&&(c.online=t.online),n}))})),function(){he.off("online"),e=!1}}),[n,O.token]),Object(c.useEffect)((function(){if(g){var e=!0;return C(),g.join(he,O.token),g.fetchMessages(O.token).then((function(t){var n=t.messages;e&&C(n)})),he.on("message",(function(t){e&&t.author._id!==O.id&&g.id===t.channel&&C((function(e){return[].concat(Object(j.a)(e),[t])}))})),he.on("messageDelete",(function(t){e&&t.channel===g.id&&C((function(e){return Object(j.a)(e).filter((function(e){return e._id!==t._id}))}))})),he.on("memberUpdate",(function(e){C((function(t){var n=Object(j.a)(t);return n.forEach((function(t){if("".concat(e._id)===t.author._id){var n=Object.assign(t.author,e);t.author=n}})),n})),R((function(t){var n=Object(j.a)(t);return n.forEach((function(t){"".concat(e._id)===t._id&&(t=Object.assign(t,e))})),n}))})),function(){e=!1,he.off("message").off("messageDelete").off("memberUpdate")}}}),[g,O.id,O.token]);var T=function(e,t){C((function(e){return[].concat(Object(j.a)(e),[t])})),g.send(e).then((function(e){var n,c=Object.assign(t,{_id:e.id,unsent:!1,invite:e.invite,content:e.content});(null===(n=e.attachment)||void 0===n?void 0:n.URL)&&(c.attachment=e.attachment),C((function(e){var n=Object(j.a)(e),a=n.find((function(e){return e._id===t._id}));return n[n.indexOf(a)]=c,n})),c.author.online=e.author.online})).catch((function(e){console.error(e),C((function(e){var n=Object(j.a)(e);return n.find((function(e){return e._id===t._id})).failed=!0,n}))}))},_=function(e){if(e){var n=function t(){m(Object(b.jsx)($,{onSend:c,channel:g,animation:"smaller",src:e,onCancel:t})),setTimeout((function(){return m()}),100)},c=function(c){var a={author:t,content:"uploading...",_id:"m".concat(Date.now()),timestamp:Date.now(),unsent:!0,channel:g.id};T({author:O,attachment:e,content:c},a),n()};m(Object(b.jsx)($,{onSend:c,channel:g,animation:"bigger",src:e,onCancel:n}))}},D=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t.target.files[0]).catch((function(){return 0}));case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:_(n),t.target.value="";case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c,a,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return-1!==navigator.userAgent.indexOf("Firefox")&&(t.preventDefault(),c=t.clipboardData.getData("text"),t.target.textContent+=c),a=t.clipboardData.items,s=null===(n=a[1])||void 0===n?void 0:n.getAsFile(),e.next=5,ie(s).catch((function(){return 0}));case 5:i=e.sent,_(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=Object(c.useState)(),U=Object(r.a)(M,2),F=U[0],V=U[1];Object(c.useLayoutEffect)((function(){y?V():V(Object(b.jsx)(A,{}))}),[y]);var P=Object(c.useState)(),q=Object(r.a)(P,2),B=q[0],H=q[1],X=function(){H();var e=function(){m(Object(b.jsx)(t,{animation:"smaller"})),setTimeout((function(){return m()}),100)},t=function(t){var c=t.animation;return Object(b.jsx)("div",{className:"dark-div ".concat(c),children:Object(b.jsx)(f.Out,{click:e,children:Object(b.jsx)(ne,{animation:c,quit:e,server:n})})})};m(Object(b.jsx)(t,{animation:"bigger"}))},Y=function(){fetch("".concat(d.a,"leave/").concat(n.id),{method:"PATCH",headers:{Authorization:O.token}})},K=function(){H();m(Object(b.jsx)(se,{server:n,quit:function e(){m(Object(b.jsx)(se,{server:n,quit:e,animation:"smaller"})),setTimeout((function(){return m()}),100)},animation:"bigger"}))},W=function(){H();m(Object(b.jsx)(ae,{server:n,quit:function e(){m(Object(b.jsx)(ae,{server:n,quit:e,animation:"smaller"})),setTimeout((function(){return m()}),100)},animation:"bigger"}))};return Object(b.jsxs)("div",{children:[h,Object(b.jsxs)("div",{onClick:function(){return H(Object(b.jsx)(f.Out,{click:function(){return H()},children:Object(b.jsxs)("div",{className:"server-menu",children:[Object(b.jsx)("p",{onClick:W,children:"Server Settings"}),Object(b.jsx)("p",{onClick:K,children:"Create Channel"}),Object(b.jsx)("p",{onClick:X,className:"invite-people",children:"Invite People"}),n.owner!==t._id&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"separator"}),Object(b.jsx)("p",{onClick:Y,className:"leave-server",children:"Leave Server"})]})]})}))},className:"server-name ".concat(B&&"server-name-2"),children:[Object(b.jsx)("span",{children:n.name}),Object(b.jsx)(te,{size:"23"})]}),B,Object(b.jsxs)("div",{className:"channels",children:[Object(b.jsx)("div",{style:{marginBottom:10}}),Z.LoadChannels((null===n||void 0===n?void 0:n.channels)||[],n,z)]}),Object(b.jsxs)("div",{className:"messages",children:[Object(b.jsx)("div",{className:"name",children:null===g||void 0===g?void 0:g.toTitle()}),Object(b.jsxs)("main",{className:"messages-main",children:[Object(b.jsxs)("div",{className:"chat",children:[F,y&&Object(b.jsx)(G.Map,{server:n,onJoin:s,me:t,messages:y,setView:m,setMessages:C})]}),Object(b.jsxs)("div",{className:"controll",children:[Object(b.jsx)("div",{placeholder:"Send a message to ".concat(null===g||void 0===g?void 0:g.name),onPaste:I,onKeyDown:function(e){if("Enter"===e.code&&0!==e.target.textContent.length&&(e.preventDefault(),e.target.textContent)){var n={author:t,content:e.target.textContent,_id:"m".concat(Date.now()),timestamp:Date.now(),unsent:!0,channel:g.id};e.target.textContent="",T(n,n)}},contentEditable:-1!==navigator.userAgent.indexOf("Firefox")?"true":"plaintext-only",className:"not-input"}),Object(b.jsxs)("div",{className:"attach-file",children:[Object(b.jsx)("input",{type:"file",onChange:D}),Object(b.jsx)(v,{size:12})]})]})]}),Object(b.jsx)("div",{className:"users",children:Object(b.jsxs)("div",{className:"members",children:[0===L.length&&Object(b.jsx)("div",{style:{marginTop:20},children:Object(b.jsx)(ee,{times:n.members.length})}),Object(b.jsx)(J.MapMembers,{me:t,setView:m,members:L,server:n})]})})]}),O.toIcon()]})},oe=n(45);var le=function(){return Object(b.jsxs)("svg",{width:"36",height:"36",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 24 24",children:[Object(b.jsxs)("linearGradient",{id:"svg-gradient",gradientUnits:"userSpaceOnUse",x1:"2.8461",y1:"11.7055",x2:"22.1588",y2:"11.7055",children:[Object(b.jsx)("stop",{offset:"0",style:{stopColor:"var(--purple-no-gradient)"}}),Object(b.jsx)("stop",{offset:"1",style:{stopColor:"var(--blue)"}})]}),Object(b.jsx)("path",{className:"st0",d:"M12.5,7.1l-6.9,5.7c0,0,0,0,0,0c0,0,0,0,0,0v5.7c0,0.2,0.1,0.4,0.2,0.5c0.2,0.2,0.3,0.2,0.5,0.2H11v-4.6H14v4.6\r h4.6c0.2,0,0.4-0.1,0.5-0.2c0.2-0.2,0.2-0.3,0.2-0.5v-5.7c0,0,0-0.1,0-0.1L12.5,7.1z M22,11.5l-2.6-2.2V4.4c0-0.1,0-0.2-0.1-0.3\r c-0.1-0.1-0.2-0.1-0.3-0.1h-2.3c-0.1,0-0.2,0-0.3,0.1c-0.1,0.1-0.1,0.2-0.1,0.3v2.3l-2.9-2.4C13.2,4.1,12.9,4,12.5,4\r c-0.4,0-0.7,0.1-0.9,0.3L3,11.5c-0.1,0.1-0.1,0.1-0.1,0.3c0,0.1,0,0.2,0.1,0.3l0.7,0.9C3.7,13,3.8,13,3.9,13.1c0.1,0,0.2,0,0.3-0.1\r l8.3-6.9l8.3,6.9c0.1,0.1,0.1,0.1,0.3,0.1h0c0.1,0,0.2-0.1,0.3-0.1l0.7-0.9c0.1-0.1,0.1-0.2,0.1-0.3C22.1,11.7,22.1,11.6,22,11.5z"})]})},ue=Object(c.createContext)(),de=Object(c.createContext)(),je=Object(c.createContext)(),he=Object(oe.io)(d.a,{transports:["websocket","polling","flashsocket"]}),me=function(e){var t=e.user,n=e.update,a=e.dm,s=Object(c.useState)(t),i=Object(r.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(),d=Object(r.a)(u,2),h=d[0],m=d[1];o.notifications.forEach((function(e){return e.saved=!0}));var f=Object(c.useState)(o.notifications),O=Object(r.a)(f,2),v=O[0],x=O[1],p=Object(c.useState)(o.servers),N=Object(r.a)(p,2),w=N[0],k=N[1];Object(c.useEffect)((function(){return he.connect(),he.emit("online",t.token),he.on("disconnect",(function(){n(Object(b.jsx)(fe,{update:n}))})),he.on("notification",(function(e){"dm"===e.type&&x((function(t){return[].concat(Object(j.a)(t),[e])}))})),he.on("leave",(function(e){m(),l((function(t){return Object.assign(t,{servers:Object(j.a)(t.servers).filter((function(t){return t._id!=="".concat(e._id)}))})})),k((function(t){return Object(j.a)(t).filter((function(t){return t._id!=="".concat(e._id)}))}))})),he.on("channelCreate",(function(e){k((function(t){var n=Object(j.a)(t);return n.find((function(t){return t._id===e.server})).channels.push(e),n}))})),function(){he.off("disconnect").off("notification").off("channelCreate"),he.disconnect()}}),[t,n]);var y=Object(c.useState)(localStorage.getItem("theme")||"light"),C=Object(r.a)(y,2),S=C[0],E=C[1],A=Object(c.useState)(Object(b.jsx)(D,{user:o,update:n})),L=Object(r.a)(A,2),R=L[0],z=L[1],T=function(e,t){e.servers.push(t),k(e.servers);var n=new g(t,e);m(n)},_=function(e){return T(o,e)},I=Object(c.useState)(),M=Object(r.a)(I,2),U=M[0],F=M[1];Object(c.useEffect)((function(){var e=function(e){return T(o,e)};return z(h?Object(b.jsx)(re,{socket:he,onJoin:e,update:n,server:h,user:o}):Object(b.jsx)(D,{onJoin:e,dm:a,user:o,update:n})),he.on("serverUpdate",(function(e){k((function(t){var n=Object(j.a)(t),c=n.find((function(t){return t._id==="".concat(e._id)}));return c.icon=e.icon,c.name=e.name,n}))})),function(){return he.off("serverUpdate")}}),[h,n,o,a]);return Object(b.jsx)(je.Provider,{value:o,children:Object(b.jsx)(ue.Provider,{value:E,children:Object(b.jsx)(de.Provider,{value:{setScreen:z,setServer:m,setUser:l,not:[v,x]},children:Object(b.jsxs)("div",{theme:S,className:"platform",children:[U,Object(b.jsxs)("div",{className:"navigate",children:[Object(b.jsx)("div",{style:{marginTop:10,marginBottom:3},className:"server ".concat(!h&&"click"),children:Object(b.jsx)("div",{onClick:function(){return h&&m()},className:"home-button ".concat(!h&&"isclicked"),children:Object(b.jsx)(le,{})})}),v.map((function(e,t){var c=new J(e.user);if(v.findIndex((function(e){return e.user._id===c.id}))!==t)return null;return Object(b.jsxs)("div",{className:"server nt ".concat(!e.saved&&"nta"),children:[Object(b.jsx)("img",{onClick:function(){m(),z(Object(b.jsx)(D,{onJoin:function(e){return _(o)},update:n,dm:{user:c},user:o}))},width:"50",height:"50",alt:"icon",src:c.displayAvatarURL(80),className:"server-icon"}),Object(b.jsx)("div",{className:"notification",children:v.filter((function(e){return e.user._id===c.id})).length})]},c.id)})),Object(b.jsx)("div",{className:"border-bottom"}),Object(b.jsx)(g.LoadServers,{index:function(){var e=o.servers.find((function(e){return e._id===(null===h||void 0===h?void 0:h.id)}));return o.servers.indexOf(e)}(),me:o,servers:w,click:function(e){(null===h||void 0===h?void 0:h.id)!==e.id&&m(e)},isHome:!h}),Object(b.jsx)(g.Add,{user:o,onCreate:_,view:F})]}),R]})})})})};var be=function(e){var t=e.update,n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(""),j=Object(r.a)(o,2),h=j[0],m=j[1],f=Object(c.useRef)(),O=Object(c.useRef)(),v=Object(c.useRef)(),x=Object(c.useRef)();return Object(b.jsxs)("div",{className:"login signup ".concat(s),children:[Object(b.jsx)("h2",{className:"login-text signup-text",children:"Create an account"}),Object(b.jsx)("input",{ref:f,className:"login-input username",placeholder:"Username"}),Object(b.jsx)("input",{ref:v,className:"login-input signup-email",placeholder:"Email"}),Object(b.jsx)("input",{ref:O,className:"login-input signup-password",type:"password",placeholder:"Password"}),Object(b.jsx)("input",{ref:x,className:"login-input confirm",placeholder:"Confirm password"}),Object(b.jsxs)("p",{className:"no-account",children:["Already have an account? ",Object(b.jsx)("span",{onClick:function(){i("shrink-me"),setTimeout((function(){return t(Object(b.jsx)(fe,{update:t}))}),200)},children:"login"})]}),Object(b.jsx)("button",{onClick:function(){console.log(f.current.value),fetch("".concat(d.a,"createuser"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:f.current.value,email:v.current.value,password:O.current.value})}).then((function(e){return e.json()})).catch((function(e){console.log(e),m("Error")})).then(function(){var e=Object(u.a)(l.a.mark((function e(n){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.error){e.next=2;break}return e.abrupt("return",m(n.error));case 2:return e.next=4,fetch("".concat(d.a,"user?password=").concat(n.password,"&email=").concat(n.email)).then((function(e){return e.json()}));case 4:c=e.sent,sessionStorage.setItem("user",JSON.stringify(c)),t(Object(b.jsx)(me,{user:c}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:"button-login sign-up",children:"Create an account"}),Object(b.jsx)("p",{className:"error-message",children:h})]})};var fe=function(e){var t=e.update,n=Object(c.useState)(""),a=Object(r.a)(n,2),s=a[0],i=a[1],o=Object(c.useState)(""),l=Object(r.a)(o,2),u=l[0],j=l[1],h=Object(c.useRef)(),m=Object(c.useRef)();return Object(b.jsxs)("div",{className:"login ".concat(s),children:[Object(b.jsx)("h2",{className:"login-text",children:"Login to continue"}),Object(b.jsxs)("form",{name:"login",children:[Object(b.jsx)("input",{id:"email",ref:m,className:"login-input email",required:!0,autoComplete:"on",type:"email",placeholder:"Email"}),Object(b.jsx)("input",{id:"password",ref:h,autoComplete:"on",required:!0,className:"login-input password",type:"password",placeholder:"Password"}),Object(b.jsxs)("p",{className:"no-account",children:["Don't have an account? ",Object(b.jsx)("span",{onClick:function(){i("expand-me"),setTimeout((function(){return t(Object(b.jsx)(be,{update:t}))}),200)},children:"create one"})]}),Object(b.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),h.current.value&&m.current.value&&(i("waiting"),fetch("".concat(d.a,"user?password=").concat(h.current.value,"&email=").concat(m.current.value)).then((function(e){return e.json()})).then((function(e){i("expand-all"),setTimeout((function(){return t(Object(b.jsx)(me,{user:e,update:t}))}),300)})).catch((function(e){i(""),j(e.toString())})))},className:"button-login sign-up",children:"Login"})]}),Object(b.jsx)("p",{className:"error-message",children:u})]})},Oe=(n(92),Object(c.createContext)());var ve=function(){var e=Object(c.useState)(Object(b.jsx)(s,{})),t=Object(r.a)(e,2),n=t[0],a=t[1];function s(){return Object(b.jsx)(fe,{update:a})}return Object(b.jsx)(Oe.Provider,{value:a,children:Object(b.jsxs)("div",{className:"main",children:[Object(b.jsx)("a",{className:"github-link",href:"https://github.com/uwu404/discord-clone-client",children:"view source code"}),n]})})};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(ve,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.817ce07f.chunk.js.map